import{L as pt,j as x,O as Pe,r as I,N as B,M as hx,P as gt,Q as mt,S as jt,U as Yx,V as Fx,W as Me,X as yt,Y as Ct,Z as wt,$ as Tx,a0 as mx,a1 as St,a2 as vt,a3 as kt,a4 as We,a5 as It,a6 as Rt,a7 as At,a8 as Ot,a9 as zt,aa as le,ab as de,ac as bx,ad as Le,ae as Dt,af as Mt,ag as Lt,ah as Tt,ai as Ve,aj as Ut,ak as Bt,al as Ft,am as $t,an as Et}from"./vendor-DVc8nriA.js";import{u as N,T as Te,a as T,b as Jx,c as Kx,d as sx,e as tx,f as Zx,g as $,M as _x,h as dx,i as px,j as ox,k as gx,l as ix,F,B as M,m as A,H as lx,A as qt,n as Nt,o as Pt,p as Wt,q as Vt,r as He,s as Qe,t as $x,v as Ge,w as Ex,I as Xx,x as Ye,y as Je,z as Ue,S as q,C as G,D as ax,E as Y,G as jx,J as H,K as qx,L as Ht,N as Qt,O as yx,P as nx,Q as cx,R as K,U as Gt,V as Z,W as xe,X as ee,Y as Yt,Z as te,_ as Ke,$ as ne,a0 as Ze,a1 as Xe,a2 as xt,a3 as et,a4 as Be,a5 as tt,a6 as nt,a7 as Jt,a8 as Kt,a9 as Zt,aa as Xt,ab as wx,ac as Sx,ad as st,ae as xn,af as ct,ag as en,ah as tn,ai as nn,aj as sn,ak as cn,al as Lx,am as an,an as rn,ao as on,ap as ln,aq as Ee,ar as dn,as as fn,at as un}from"./chakra-XY0lfFvN.js";import{u as fe,w as hn}from"./xlsx-DrgRuPKf.js";import"./motion-C13vZQA4.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();const at=pt({component:()=>x.jsx("div",{id:"ok",children:x.jsx(Pe,{})})});(function(e,n){const t={_0x21ce12:172,_0x4f4918:189},s=Q,a=e();for(;;)try{if(parseInt(s(178))/1+parseInt(s(159))/2+-parseInt(s(190))/3+parseInt(s(157))/4*(-parseInt(s(179))/5)+parseInt(s(177))/6*(-parseInt(s(t._0x21ce12))/7)+-parseInt(s(t._0x4f4918))/8+parseInt(s(191))/9===n)break;a.push(a.shift())}catch{a.push(a.shift())}})(Nx,-483007+-43958*-8+635804);const bn=function(){let e=!0;return function(n,t){const s=e?function(){const a=Q;if(t){const c=t[a(162)](n,arguments);return t=null,c}}:function(){};return e=!1,s}}(),he=bn(void 0,function(){const e={_0xaa905b:154,_0xb0e049:145,_0x49e9e5:184,_0x39c02b:187,_0x49f8e5:145,_0x45a8f6:158},n=Q,t={};t[n(e._0xaa905b)]=n(187)+"+$";const s=t;return he[n(e._0xb0e049)]()[n(e._0x49e9e5)](n(e._0x39c02b)+"+$")[n(e._0x49f8e5)]()[n(e._0x45a8f6)+"r"](he).search(s[n(154)])});he();const kx=function(){const e={_0x1e6333:162};let n=!0;return function(t,s){const a=n?function(){const c=Q;if(s){const r=s[c(e._0x1e6333)](t,arguments);return s=null,r}}:function(){};return n=!1,a}}(),_n=kx(void 0,function(){const e={_0x4752e1:152,_0x4671ef:182,_0x203d7d:150,_0x4dda0e:175,_0x5bf5b4:181,_0x5477e7:176,_0x527867:168,_0x541b8b:155},n={_0x313522:185,_0x2bc501:180,_0xfde482:165},t=Q,s={ZhnlJ:function(o,l){return o(l)},CbSje:function(o,l){return o+l},vJfsq:"return (fu"+t(167),njPMy:function(o){return o()},XJLTZ:t(146),pTOHu:t(171),jMFFu:"info",mJXpy:t(e._0x4752e1),bvQon:t(156),ONTlg:t(183)},a=function(){const o=t;let l;try{l=s[o(166)](Function,s[o(186)](s[o(n._0x313522)],o(149)+o(n._0x2bc501)+o(n._0xfde482)+" )")+");")()}catch{l=window}return l},c=s[t(e._0x4671ef)](a),r=c[t(173)]=c.console||{},i=[s[t(151)],s[t(e._0x203d7d)],s[t(e._0x4dda0e)],"error",s.mJXpy,s.bvQon,s[t(e._0x5bf5b4)]];for(let o=6823*1+33*-48+5239*-1;o<i[t(e._0x5477e7)];o++){const l=kx.constructor[t(e._0x527867)][t(e._0x541b8b)](kx),b=i[o],d=r[b]||l;l.__proto__=kx[t(155)](kx),l[t(145)]=d.toString.bind(d),r[b]=l}});_n();async function pn(e,n){const t={_0x3d2b4e:161,_0x2ebd63:163},s=Q,a={};a.cBMdJ=s(147);const c=a,r={};return r.qq=e,r[s(169)]=n,(await D[s(t._0x3d2b4e)](c[s(t._0x2ebd63)],r))[s(148)]}function Q(e,n){const t=Nx();return Q=function(s,a){s=s-(5969*-1+4031+2083*1);let c=t[s];if(Q.VuXlmA===void 0){var r=function(b){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let u="",h="",_=u+r;for(let f=0,g,p,j=0;p=b.charAt(j++);~p&&(g=f%4?g*64+p:p,f++%4)?u+=_.charCodeAt(j+10)-10!==0?String.fromCharCode(255&g>>(-2*f&6)):f:0)p=d.indexOf(p);for(let f=0,g=u.length;f<g;f++)h+="%"+("00"+u.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(h)};Q.WkeZhU=r,e=arguments,Q.VuXlmA=!0}const i=t[0],o=s+i,l=e[o];if(l)c=l;else{const b=function(d){this.OeJRCo=d,this.dqUXzb=[1,0,0],this.uBfjAB=function(){return"newState"},this.SHpXwp="\\w+ *\\(\\) *{\\w+ *",this.wTYonM=`['|"].+['|"];? *}`};b.prototype.ZIftMW=function(){const d=new RegExp(this.SHpXwp+this.wTYonM),u=d.test(this.uBfjAB.toString())?--this.dqUXzb[62*149+9119*1+13*-1412]:--this.dqUXzb[13*-314+7631+-3549];return this.RIuycT(u)},b.prototype.RIuycT=function(d){return~d?this.kMEMcP(this.OeJRCo):d},b.prototype.kMEMcP=function(d){for(let u=1*5651+-1*6487+-22*-38,h=this.dqUXzb.length;u<h;u++)this.dqUXzb.push(Math.round(Math.random())),h=this.dqUXzb.length;return d(this.dqUXzb[3182*1+-5280+2098])},new b(Q).ZIftMW(),c=Q.WkeZhU(c),e[o]=c}return c},Q(e,n)}function Nx(){const e=["nteYndGWDwHQBhDc","ndvXq0D2wwu","y3rVCIGICMv0Dq","t05uBgC","BMPqtxK","DhjHy2u","C2vHCMnO","DKPMC3e","q2jtAMu","kcGOlISPkYKRkq","CgLU","mZi5ntqXnNbzBuj6sa","mJiYnZa3mwPwDxfgvG","mtm1ode5mdLArujZDfG","Dg9tDhjPBMC","Bg9N","l2XVz2LUl3fX","zgf0yq","E30Uy29UC3rYDq","Cfrpshu","wePmvfO","zxHJzxb0Aw9U","BKrdBLK","AuHYtgW","yMLUza","DgfIBgu","mJq4nZG4rfr0CuPR","y29UC3rYDwn0BW","mtKXmZu4nK9kCuHuDW","D21TDe8","Cg9ZDa","yxbWBhK","y0jnzeO","l2XVz291Da","CM4GDgHPCYiPka","wMHUBeO","BMn0Aw9UkcKG","ChjVDg90ExbL","CgfZC3DVCMq","l2XVz2LUl3bPBG","D2fYBG","ntmXodK5mM1VCwvctW","y29UC29Szq","z2v0","AK1grNu","BgvUz3rO","nLnRvLfzBW"];return Nx=function(){return e},Nx()}async function gn(){const e={_0x408179:148},n=Q;return(await D[n(161)](n(164)))[n(e._0x408179)]}(function(e,n){const t={_0x4e4cc0:301,_0x2dd045:294,_0x210da2:298,_0x2ebed7:283,_0x51d460:277,_0x41dbf:293},s=X,a=e();for(;;)try{if(-parseInt(s(274))/1+-parseInt(s(281))/2*(parseInt(s(t._0x4e4cc0))/3)+parseInt(s(300))/4*(-parseInt(s(t._0x2dd045))/5)+-parseInt(s(t._0x210da2))/6*(-parseInt(s(t._0x2ebed7))/7)+parseInt(s(t._0x51d460))/8+parseInt(s(t._0x41dbf))/9+-parseInt(s(296))/10*(-parseInt(s(306))/11)===n)break;a.push(a.shift())}catch{a.push(a.shift())}})(Px,279*-271+-353*-1808+-9829*10);const mn=function(){let e=!0;return function(n,t){const s=e?function(){const a=X;if(t){const c=t[a(280)](n,arguments);return t=null,c}}:function(){};return e=!1,s}}(),be=mn(void 0,function(){const e={_0x3674bc:273,_0x1d5735:285,_0x521952:276,_0x8b2613:297},n=X,t={};t.WTcBU=n(297)+"+$";const s=t;return be[n(e._0x3674bc)]()[n(e._0x1d5735)](s[n(e._0x521952)])[n(273)]()[n(302)+"r"](be).search(n(e._0x8b2613)+"+$")});function Px(){const e=["ChjVDg90ExbL","zgf0yq","Bg9N","BgvUz3rO","mJy5otqXnu11sKvVBa","ndu4otvTANjLDu0","CM4GDgHPCYiPka","mtbPCKLUugy","kcGOlISPkYKRkq","nMPzDxPWDq","DhjHy2u","mJbHywfAtha","m29eD21vtW","y29UC3rYDwn0BW","y3rVCIGICMv0Dq","BMn0Aw9UkcKG","zxjYB3i","mZCXodq2mKfkq0PuAW","D2fYBG","Aw5MBW","x19WCM90B19F","Dg9tDhjPBMC","odC5mdy5we93EfPr","zxHJzxb0Aw9U","v1rJqLu","mJe0mZK2oe9vEgfNEa","rKfks0m","CgfZC3DVCMq","yxbWBhK","odm0odK0vLjVEhbc","ww5kAgq","nJmWntm0mvr2zMrpAG","yMLUza","C2vHCMnO","Cg9ZDa","CgHWtwe","y29UC29Szq"];return Px=function(){return e},Px()}function X(e,n){const t=Px();return X=function(s,a){s=s-(-13*-47+8569*1+-17*524);let c=t[s];if(X.DFjolL===void 0){var r=function(b){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let u="",h="",_=u+r;for(let f=0,g,p,j=0;p=b.charAt(j++);~p&&(g=f%4?g*64+p:p,f++%4)?u+=_.charCodeAt(j+10)-10!==0?String.fromCharCode(255&g>>(-2*f&6)):f:0)p=d.indexOf(p);for(let f=0,g=u.length;f<g;f++)h+="%"+("00"+u.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(h)};X.fiHxhz=r,e=arguments,X.DFjolL=!0}const i=t[-3968+-3640*2+11248],o=s+i,l=e[o];if(l)c=l;else{const b=function(d){this.axjZSR=d,this.aDfvww=[1,0,0],this.JyhNkm=function(){return"newState"},this.MOaXNz="\\w+ *\\(\\) *{\\w+ *",this.IdIzjb=`['|"].+['|"];? *}`};b.prototype.WayDFh=function(){const d=new RegExp(this.MOaXNz+this.IdIzjb),u=d.test(this.JyhNkm.toString())?--this.aDfvww[1]:--this.aDfvww[7513+3*1490+-11983];return this.xYUWER(u)},b.prototype.xYUWER=function(d){return~d?this.GvCexz(this.axjZSR):d},b.prototype.GvCexz=function(d){for(let u=1*6729+-1999*2+-2731,h=this.aDfvww.length;u<h;u++)this.aDfvww.push(Math.round(Math.random())),h=this.aDfvww.length;return d(this.aDfvww[-2145*-3+-1280+5155*-1])},new b(X).WayDFh(),c=X.fiHxhz(c),e[o]=c}return c},X(e,n)}be();const Ix=function(){let e=!0;return function(n,t){const s=e?function(){if(t){const a=t.apply(n,arguments);return t=null,a}}:function(){};return e=!1,s}}(),jn=Ix(void 0,function(){const e={_0x531634:307,_0x44db06:287,_0x13c1be:288,_0x5479d5:291,_0x3fbd18:275,_0x3c58eb:292,_0x53febb:302,_0x62cb6f:289,_0x34a23d:272},n={_0x1e0c68:303,_0x2e5202:295},t=X,s={UIHTO:function(o,l){return o(l)},phpMa:function(o){return o()},YRKTC:t(e._0x531634),FAJKC:t(308),YnJhd:"table",TLeMD:t(299)},a=function(){const o=t;let l;try{l=s.UIHTO(Function,"return (fu"+o(304)+("{}.constru"+o(n._0x1e0c68)+o(n._0x2e5202)+" )")+");")()}catch{l=window}return l},c=s[t(e._0x44db06)](a),r=c[t(288)]=c[t(e._0x13c1be)]||{},i=[t(e._0x5479d5),s.YRKTC,s[t(278)],t(305),t(e._0x3fbd18),s[t(282)],s.TLeMD];for(let o=4360*-1+6853+-2493;o<i[t(e._0x3c58eb)];o++){const l=Ix[t(e._0x53febb)+"r"][t(e._0x62cb6f)][t(284)](Ix),b=i[o],d=r[b]||l;l[t(e._0x34a23d)]=Ix[t(284)](Ix),l[t(273)]=d[t(273)].bind(d),r[b]=l}});jn();async function yn(e,n){const t={_0x2f69f6:279},s=X,a={};return a.qq=e,a[s(t._0x2f69f6)]=n,(await D[s(286)]("/register",a))[s(290)]}function Cn({url:e}){const n=N(),[t,s]=I.useState(null);return I.useEffect(()=>{ot.get(e).then(a=>{s(a.data)}).catch(a=>{n({status:"error",title:"获取日常结果失败",description:a.response?.data||"网络错误"})})},[e,n]),x.jsx(wn,{resultData:t})}function wn({resultData:e}){return x.jsx(Te,{rounded:"lg",bg:T("white","gray.700"),boxShadow:"lg",children:x.jsxs(Jx,{size:"sm",variant:"striped",colorScheme:"teal",children:[x.jsx(Kx,{children:x.jsxs(sx,{children:[x.jsx(tx,{children:"序号"}),x.jsx(tx,{children:"名字"}),x.jsx(tx,{children:"配置"}),x.jsx(tx,{children:"状态"}),x.jsx(tx,{children:"结果"})]})}),x.jsx(Zx,{children:e?.order?.map((n,t)=>x.jsx(Sn,{index:t,resultData:e.result[n]},n))})]})})}function Sn({resultData:e,index:n,...t}){return x.jsxs(sx,{...t,children:[x.jsxs($,{children:[" ",n," "]}),x.jsxs($,{children:[" ",e.name," "]}),x.jsx($,{style:{whiteSpace:"pre-wrap"},children:e.config}),x.jsxs($,{children:[" ",e.status," "]}),x.jsx($,{style:{whiteSpace:"pre-wrap"},children:e.log})]})}function vn({header:e,data:n}){const t=T("blue.50","blue.800"),s=T("green.50","green.800"),[a,c]=I.useState(null),r=(_,f)=>{const g=f.split(".");let p=_;for(const j of g){if(p!==null&&typeof p=="object"&&j in p){p=p[j];continue}return null}return p},i=I.useMemo(()=>{if(!a)return n;const{key:_,direction:f}=a;return[...n].sort((g,p)=>{const j=r(g,_),k=r(p,_);if(typeof j=="number"&&typeof k=="number")return f==="asc"?j-k:k-j;const C=String(j),v=String(k);return f==="asc"?C.localeCompare(v):v.localeCompare(C)})},[n,a]),{maxDepth:o,headerRows:l}=I.useMemo(()=>{const _=j=>j.reduce((k,C)=>{if(typeof C=="string")return Math.max(k,1);const v=Object.keys(C)[0];return Math.max(k,1+_(C[v]))},0),f=_(e),g=Array.from({length:f},()=>[]),p=(j,k=0,C="",v=-1)=>{j.forEach((w,y)=>{if(g[k].push({header:w,parent:C,index:v==-1?y:v}),typeof w!="string"){const R=Object.keys(w)[0];p(w[R],k+1,`${C}${R}.`,y)}})};return p(e),{maxDepth:f,headerRows:g}},[e]),b=_=>_.reduce((f,g)=>f+(typeof g=="string"?1:b(g[Object.keys(g)[0]])),0),d=25,u=(_,f)=>{const g=[];for(let p=0;p<_.length;p++){const{header:j,parent:k}=_[p];let C,v=1,w=1,y=!1;if(typeof j=="string")C=j,w=o-f,y=!0;else{const P=Object.keys(j)[0];C=P,v=b(j[P])}const R=`${k}${C}`,V=_[p].index%2==0?t:s;g.push(x.jsx(tx,{colSpan:v,rowSpan:w,outline:"1px solid gray",p:1,textAlign:"center",position:"sticky",top:`${f*d}px`,...f===0&&p==0?{left:0,zIndex:200}:{zIndex:100-f},bg:V,...y?{onClick:()=>{c(P=>P?.key===R?{key:R,direction:P.direction==="asc"?"desc":"asc"}:{key:R,direction:"asc"})}}:{},children:x.jsxs(F,{alignItems:"center",justifyContent:"center",overflow:"hidden",children:[C,y&&a?.key===R&&x.jsx(M,{as:"span",ml:1,children:a.direction==="asc"?"↑":"↓"})]})},`${f}-${p}`))}return x.jsx(sx,{children:g},f)},h=(_,f,g,p="",j=-1)=>_.flatMap((k,C)=>{if(typeof k=="string")return x.jsx($,{border:"1px solid gray",whiteSpace:"pre",bg:j==-1?C%2==0?t:s:j%2==0?t:s,children:f[k]??""},`ceil-${k}-${p}-${g}-${C}`);{const v=Object.keys(k)[0],w=k[v],y=f[v];return y!==void 0&&typeof y!="object"?x.jsx($,{whiteSpace:"pre",border:"1px solid gray",children:y},`ceil-${v}-${p}-${g}-${C}`):h(w,y||{},g,`${p}${v}.`,j==-1?C:j)}});return x.jsx(Te,{rounded:"lg",boxShadow:"lg",overflowX:"auto",overflowY:"auto",maxH:"calc(100vh - 100px)",children:x.jsxs(Jx,{size:"sm",variant:"unstyled",sx:{"td:first-of-type":{position:"sticky",left:0,zIndex:1,border:"1px solid gray"}},children:[x.jsx(Kx,{children:l.map((_,f)=>u(_,f))}),x.jsx(Zx,{children:i.map((_,f)=>x.jsx(sx,{children:h(e,_,f)},f))})]})})}const kn=B.create(({header:e,data:n})=>{const t=hx();return x.jsxs(_x,{blockScrollOnMount:!1,size:"full",closeOnOverlayClick:!1,isOpen:t.visible,onClose:t.hide,children:[x.jsx(dx,{}),x.jsxs(px,{children:[x.jsx(ox,{children:"表格结果"}),x.jsx(gx,{}),x.jsx(ix,{children:x.jsx(vn,{header:e,data:n})})]})]})});function In({header:e,data:n}){const t=h=>h.reduce((_,f)=>{if(typeof f=="string")return Math.max(_,1);const g=f[Object.keys(f)[0]];return Math.max(_,1+t(g))},0),s=t(e),a=h=>h.reduce((_,f)=>_+(typeof f=="string"?1:a(f[Object.keys(f)[0]])),0),c=Array.from({length:s},()=>[]),r=[];function i(h,_=0,f=0){h.forEach(g=>{if(typeof g=="string"){c[_].push(g);for(let p=_+1;p<s;p++)c[p].push(""),r.push({s:{r:_,c:f},e:{r:s-1,c:f}});f+=1}else{const p=Object.keys(g)[0],j=g[p],k=a(j);c[_].push(p);for(let C=1;C<k;C++)c[_].push("");r.push({s:{r:_,c:f},e:{r:_,c:f+k-1}}),i(j,_+1,f),f+=k}})}i(e);const o=(h,_)=>h.flatMap(f=>{if(typeof f=="string")return _[f];{const g=Object.keys(f)[0],p=f[g],j=_[g];return j!==void 0&&typeof j!="object"?j:o(p,j||{})}}),l=n.map(h=>o(e,h)),b=[...c,...l],d=new Date().toLocaleString("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/[/\s:]/g,"-"),u=()=>{const h=fe.aoa_to_sheet(b);h["!merges"]=r;const _=fe.book_new();fe.book_append_sheet(_,h,"Sheet1"),hn(_,`表格_${d}.xlsx`)};return x.jsx(A,{onClick:u,colorScheme:"teal",children:"导出 Excel"})}function Rn({header:e,data:n}){return x.jsx(M,{children:x.jsx(F,{direction:"column",gap:4,children:x.jsxs(lx,{children:[x.jsx(A,{onClick:async()=>{await B.show(kn,{header:e,data:n})},children:"展示表格"}),x.jsx(In,{header:e,data:n})]})})})}function An({url:e}){const n=N(),[t,s]=I.useState(null);return I.useEffect(()=>{ot.get(e).then(a=>{s(a.data)}).catch(a=>{n({status:"error",title:"获取日常结果失败",description:a.response?.data||"网络错误"})})},[e,n]),x.jsx(On,{resultData:t})}function On({resultData:e}){const n=!!(e?.table?.data?.length??!1);return x.jsx(x.Fragment,{children:x.jsx(Te,{rounded:"lg",bg:T("white","gray.700"),boxShadow:"lg",mb:n?4:0,children:x.jsxs(Jx,{size:"sm",variant:"striped",colorScheme:"teal",width:"100%",children:[x.jsx(Kx,{children:x.jsxs(sx,{children:[x.jsx(tx,{children:"名字"}),x.jsx(tx,{children:e?.name})]})}),x.jsxs(Zx,{children:[x.jsxs(sx,{children:[x.jsx($,{children:"配置"}),x.jsx($,{style:{whiteSpace:"pre-wrap"},children:e?.config})]}),x.jsxs(sx,{children:[x.jsx($,{children:"状态"}),x.jsx($,{children:e?.status})]}),n&&e?.table&&x.jsxs(sx,{children:[x.jsx($,{children:"表格"}),x.jsx($,{children:x.jsx(Rn,{...e.table})})]}),x.jsxs(sx,{children:[x.jsx($,{children:"结果"}),x.jsx($,{style:{whiteSpace:"pre-wrap"},children:e?.log})]})]})]})})})}function zn({url:e}){const t=e.includes("daily_result")?Cn:An;return x.jsx(t,{url:e})}function Dn({url:e}){return x.jsxs(He,{isLazy:!0,variant:"soft-rounded",children:[x.jsxs(Qe,{children:[x.jsx($x,{children:"文本"}),x.jsx($x,{children:"图片"})]}),x.jsxs(Ge,{children:[x.jsx(Ex,{children:x.jsx(zn,{url:e+"?text=true"})}),x.jsx(Ex,{children:x.jsx(Xx,{src:e,width:"100%",height:"100%"})})]})]})}function Mn({resultInfo:e}){return x.jsx(qt,{allowToggle:!0,children:e.map((n,t)=>x.jsx(Nt,{children:({isExpanded:s})=>x.jsxs(x.Fragment,{children:[x.jsx("h2",{children:x.jsxs(Pt,{children:[n.status=="成功"||n.status=="跳过"?x.jsx(gt,{}):n.status=="警告"||n.status=="中止"?x.jsx(mt,{}):x.jsx(jt,{}),x.jsxs(M,{as:"span",flex:"1",textAlign:"left",children:[n.time," ",n.alias]}),x.jsx(Wt,{})]})}),x.jsx(Vt,{pb:4,children:s&&x.jsx(Dn,{url:n.url})})]})},t))})}const _e=B.create(({alias:e,title:n,resultInfo:t})=>{const s=hx();return x.jsxs(_x,{blockScrollOnMount:!1,size:"full",closeOnOverlayClick:!1,isOpen:s.visible,onClose:s.hide,children:[x.jsx(dx,{}),x.jsxs(px,{children:[x.jsxs(ox,{children:[e,"的",n,"结果"]}),x.jsx(gx,{}),x.jsx(ix,{children:x.jsx(Mn,{resultInfo:t})})]})]})}),Ln="/daily/assets/announcement-DRPQywjv.png",Tn=B.create(()=>{const e=hx();return x.jsxs(_x,{blockScrollOnMount:!1,size:"5xl",closeOnOverlayClick:!1,isOpen:e.visible,onClose:async()=>{e.resolve(),await e.hide()},children:[x.jsx(dx,{}),x.jsxs(px,{children:[x.jsx(ox,{children:"使用须知"}),x.jsx(gx,{}),x.jsx(ix,{children:x.jsx(Xx,{src:Ln,alt:"announcement"})})]})]})});function Cx({title:e,body:n,onConfirm:t,onClose:s,...a}){return x.jsx(Ye,{onClose:s,...a,children:x.jsx(dx,{children:x.jsxs(Je,{children:[x.jsx(ox,{fontSize:"lg",fontWeight:"bold",children:e}),x.jsx(ix,{children:n}),x.jsxs(Ue,{children:[x.jsx(A,{onClick:s,children:"取消"}),x.jsx(A,{colorScheme:"red",onClick:t,ml:3,children:"确认"})]})]})})})}function Un(e=0){const[n,t]=I.useState(e);return[n,()=>t(c=>c+1),()=>t(c=>c-1)]}const Wx=B.create(()=>{const e=hx(),{handleSubmit:n,register:t,watch:s,formState:{isSubmitting:a,errors:c}}=Yx(),r=s("password"),i=o=>{e.resolve(o.password)};return x.jsxs(_x,{closeOnOverlayClick:!1,isOpen:e.visible,onClose:e.hide,children:[x.jsx(dx,{}),x.jsxs(px,{children:[x.jsx(ox,{children:"重置密码"}),x.jsx(gx,{}),x.jsx(ix,{children:x.jsx("form",{onSubmit:n(i),children:x.jsxs(q,{spacing:4,children:[x.jsxs(G,{isInvalid:!!c.password,children:[x.jsx(ax,{children:"输入新密码"}),x.jsx(Y,{type:"password",placeholder:"5位以上",...t("password",{required:"请输入密码",minLength:{value:5,message:"密码长度至少 5 位"}})}),x.jsx(jx,{children:c.password?.message})]}),x.jsxs(G,{isInvalid:!!c.passwordRepeat,children:[x.jsx(ax,{children:"再次输入新密码"}),x.jsx(Y,{type:"password",placeholder:"与上面一致",...t("passwordRepeat",{required:"请确认密码",validate:o=>o===r||"两次输入的密码不一致"})}),x.jsx(jx,{children:c.passwordRepeat?.message})]}),x.jsx(A,{bg:"blue.400",color:"white",_hover:{bg:"blue.500"},isLoading:a,type:"submit",children:"重置密码"})]})})})]})]})}),Ux=new Map;function Bn(){const e=N(),[n,t]=I.useState(),s=H(),a=H(),c=H(),r=H(),[i,o]=I.useState(""),[l,b,d]=Un(),[u,h]=I.useState(()=>{const m=localStorage.getItem("accountViewMode");return m?m==="table":!1}),[_,f]=I.useState([]),g=T("white","gray.800"),p=T("#F5F7FA","gray.800"),j=T("gray.100","gray.900"),k=T("white","gray.700"),C=T("#5cb85c","green.400"),v=()=>{B.show(Tn,{}).then(()=>{localStorage.setItem("readme2","true")}).catch(()=>{localStorage.setItem("readme2","true")})};I.useEffect(()=>{localStorage.getItem("readme2")||v()},[]),I.useEffect(()=>{Ux.clear(),Hn().then(m=>{t(m)}).catch(m=>{e({status:"error",title:m?.response?.data||"网络错误"})})},[s.isOpen,e]);const w=m=>{Ne({default_account:m}).then(z=>{t({...n,default_account:m}),e({status:"success",title:"设置默认账号成功",description:z})}).catch(z=>{e({status:"error",title:"设置默认账号失败",description:z?.response?.data||"网络错误"})})},y=()=>{B.show(Wx,{}).then(m=>{Ne({password:m}).then(z=>{e({status:"success",title:"修改密码成功",description:z}),B.hide(Wx).then(()=>{}).catch(()=>{})}).catch(z=>{e({status:"error",title:"修改密码失败",description:z?.response?.data||"网络错误"})})}).catch(()=>{})},R=m=>{t(z=>{if(!z?.accounts)return z;const ux=z.accounts.map($e=>$e.name===m.name?m:$e);return{...z,accounts:ux}})},V=()=>{if(u&&_.length>0)for(const m of _){const z=Ux.get(m);z&&z(!1)}else for(const m of Ux.values())m(!1)},P=m=>{f(z=>z.includes(m)?z.filter(ux=>ux!==m):[...z,m])},vx=()=>{_.length===n?.accounts?.length?f([]):f(n?.accounts?.map(m=>m.name)??[])},re=()=>{if(a.isOpen){if(!i||i.trim()===""){e({status:"error",title:"创建账号失败",description:"账号昵称不能为空"});return}Gn(i).then(m=>{e({status:"success",title:"创建账号成功",description:m}),a.onToggle(),o(""),s.onToggle()}).catch(m=>{e({status:"error",title:"创建账号失败",description:m?.response?.data||"网络错误"})})}else a.onToggle()},S=m=>{const z=m.target.files?.[0];z&&Qn(z).then(ux=>{e({status:"success",title:"导入账号成功",description:ux}),s.onToggle()}).catch(ux=>{e({status:"error",title:"导入账号失败",description:ux?.response?.data||"网络错误"})})},L=Fx.useRef(null),W=Me(),oe=()=>{Yn().then(async m=>{e({status:"success",title:"删除QQ成功",description:m}),c.onToggle(),await W({to:se.to})}).catch(m=>{e({status:"error",title:"删除QQ失败",description:m?.response?.data||"网络错误"})})},_t=()=>{Jn().then(m=>{e({status:"success",title:"清除账号成功",description:m}),r.onToggle(),s.onToggle()}).catch(m=>{e({status:"error",title:"清除账号失败",description:m?.response?.data||"网络错误"})})},ie=Fx.useRef(null);return x.jsxs(q,{height:"100%",children:[x.jsx(M,{children:x.jsxs(lx,{spacing:2,flexWrap:"wrap",alignItems:"center",children:[x.jsxs(qx,{size:"lg",variant:"subtle",colorScheme:"cyan",onClick:()=>v(),children:[x.jsx(Ht,{boxSize:"12px",as:yt}),x.jsx(Qt,{children:n?.qq})]}),x.jsx(A,{size:"sm",colorScheme:"blue",fontWeight:"normal",leftIcon:x.jsx(Ct,{}),onClick:y,children:"修改密码"}),x.jsx(A,{size:"sm",colorScheme:"red",fontWeight:"normal",leftIcon:x.jsx(wt,{}),onClick:c.onOpen,children:"注销QQ"}),x.jsx(Cx,{leastDestructiveRef:L,isOpen:c.isOpen,onClose:c.onClose,title:"删除QQ",body:`确定删除QQ${n?.qq}吗？`,onConfirm:oe,children:" "})]})}),x.jsx(q,{children:x.jsxs(yx,{spacing:2,templateColumns:"repeat(auto-fill, minmax(100px, 1fr))",children:[x.jsx(A,{colorScheme:"orange",fontWeight:"normal",leftIcon:x.jsx(Tx,{}),onClick:V,isLoading:l!=0,children:u&&_.length>0?`清选择(${_.length})`:"清理全部"}),x.jsx(A,{as:mx,colorScheme:"blue",fontWeight:"normal",leftIcon:x.jsx(St,{}),to:`${rx.to||""}BATCH_RUNNER`,isLoading:l!=0,children:"批量运行"}),x.jsx(nx,{label:u?"切换到卡片视图":"切换到表格视图",children:x.jsx(A,{colorScheme:"teal",fontWeight:"normal",onClick:()=>{const m=!u;h(m),localStorage.setItem("accountViewMode",m?"table":"card")},leftIcon:u?x.jsx(vt,{}):x.jsx(kt,{}),children:u?"卡片视图":"表格视图"})}),u&&x.jsx(x.Fragment,{children:x.jsxs(lx,{spacing:0,borderRadius:"md",border:"1px solid",borderColor:"gray.200",bg:"white",_dark:{borderColor:"gray.600",bg:"gray.800"},overflow:"hidden",children:[x.jsx(nx,{label:_.length!==1?"请选择一个账号作为配置源":`将其他账号配置同步为 ${_[0]} 的配置`,children:x.jsx(cx,{"aria-label":"同步配置",icon:x.jsx(We,{size:"22px"}),variant:"ghost",colorScheme:"gray",_hover:{bg:"teal.400",clor:"white"},borderRadius:"0",flex:"1",onClick:()=>{if(_.length===1){const m=_[0];window.confirm(`确定将其他账号配置同步为${m}的配置吗？`)&&it(m).then(z=>{e({status:"success",title:`同步${m}配置成功`,description:z})}).catch(z=>{e({status:"error",title:"同步配置失败",description:z?.response?.data||"网络错误"})})}},isDisabled:_.length!==1})}),x.jsx(nx,{label:_.length!==1?"请选择一个账号设为默认":`将 ${_[0]} 设为默认账号`,children:x.jsx(cx,{"aria-label":"设为默认账号",icon:x.jsx(It,{size:"22px"}),variant:"ghost",colorScheme:"gray",_hover:{bg:"purple.400",clor:"white"},borderRadius:"0",borderLeft:"1px solid",borderColor:"gray.300",flex:"1",onClick:()=>{_.length===1&&w(_[0])},isDisabled:_.length!==1})})]})}),x.jsxs(lx,{spacing:0,borderRadius:"md",border:"1px solid",borderColor:"gray.200",bg:"white",_dark:{borderColor:"gray.600",bg:"gray.800"},overflow:"hidden",flex:"1",justifyContent:"space-between",children:[n?.clan&&x.jsx(M,{flex:"1",display:"flex",justifyContent:"center",children:x.jsx(nx,{label:"账号导入",children:x.jsx(cx,{"aria-label":"账号导入",icon:x.jsx(Rt,{size:"22px"}),variant:"ghost",colorScheme:"gary",_hover:{bg:"blue.400",clor:"white"},borderRadius:"0",size:"sm",w:"100%",h:"40px",onClick:()=>{ie.current&&ie.current.click()}})})}),x.jsx(Y,{ref:ie,type:"file",accept:".tsv",onChange:S,onClick:m=>{m.target.value=""},display:"none"}),x.jsx(M,{flex:"1",display:"flex",justifyContent:"center",borderLeft:n?.clan?"1px solid":"none",borderColor:"gray.300",children:x.jsx(nx,{label:u&&_.length>0?`删除选中(${_.length})`:"删除全部",children:x.jsx(cx,{"aria-label":"删除账号",icon:x.jsx(At,{size:"22px"}),variant:"ghost",colorScheme:"gary",_hover:{bg:"red.400",clor:"white"},borderRadius:"0",size:"sm",w:"100%",h:"40px",onClick:()=>{if(u&&_.length>0){if(window.confirm(`确定删除选中的 ${_.length} 个账号吗？`)){const m=_.map(z=>dt(z));Promise.all(m).then(()=>{e({status:"success",title:"删除账号成功",description:`已删除 ${_.length} 个账号`}),f([]),s.onToggle()}).catch(z=>{e({status:"error",title:"删除账号失败",description:z?.response?.data||"网络错误"})})}}else r.onOpen()}})})}),x.jsx(M,{flex:"1",display:"flex",justifyContent:"center",borderLeft:"1px solid",borderColor:"gray.300",children:x.jsx(nx,{label:a.isOpen?"提交":"创建账号",children:x.jsx(cx,{"aria-label":"创建账号",icon:a.isOpen?x.jsx(Ot,{size:"22px"}):x.jsx(zt,{size:"22px"}),variant:"ghost",colorScheme:a.isOpen?"green.300":"gray",bg:a.isOpen?"green.400":"transparent",color:a.isOpen?"white":"inherit",_hover:{bg:"green.400"},borderRadius:"0",size:"sm",w:"100%",h:"40px",onClick:re})})})]}),a.isOpen&&x.jsx(Y,{isRequired:!0,placeholder:"请输入昵称",onChange:m=>{o(m.target.value)}}),x.jsx(Cx,{leastDestructiveRef:L,isOpen:r.isOpen,onClose:r.onClose,title:"删除所有账号",body:"确定删除所有账号吗？",onConfirm:_t,children:" "})]})}),u?x.jsx(M,{flex:1,overflow:"auto",bg:j,borderRadius:"md",children:x.jsxs(Jx,{variant:"simple",colorScheme:"blue",size:"sm",bg:g,borderRadius:"md",boxShadow:"md",ml:"0",mr:"auto",children:[x.jsx(Kx,{position:"sticky",top:0,bg:p,zIndex:1,boxShadow:"sm",children:x.jsxs(sx,{children:[x.jsx(tx,{px:3,fontSize:"md",py:4,fontWeight:"bold",width:"5%",children:x.jsx(K,{isChecked:_.length>0&&_.length===n?.accounts?.length,isIndeterminate:_.length>0&&_.length<(n?.accounts?.length??0),onChange:vx,colorScheme:"blue"})}),x.jsx(tx,{px:0,fontSize:"md",py:4,fontWeight:"bold",width:"25%",minWidth:"80px",children:"账号"}),x.jsx(tx,{px:3,fontSize:"md",py:4,fontWeight:"bold",width:"30%",children:"最近记录"}),x.jsx(tx,{px:3,fontSize:"md",py:4,fontWeight:"bold",width:"30%",children:"操作"})]})}),x.jsx(Zx,{children:n?.accounts?.map(m=>x.jsx(qe,{account:m,onToggle:s.onToggle,increaseCount:b,decreaseCount:d,updateAccountInfo:R,isTableView:u,isSelected:_.includes(m.name),onToggleSelect:()=>P(m.name),statusSuccessColor:C,tableBgColor:k,defaultAccount:n?.default_account},m.name))})]})}):x.jsx(Gt,{onChange:w,value:n?.default_account,flex:1,overflow:"auto",children:x.jsx(q,{children:x.jsx(yx,{spacing:4,templateColumns:"repeat(auto-fill, minmax(250px, 1fr))",children:n?.accounts?.map(m=>x.jsx(qe,{account:m,onToggle:s.onToggle,increaseCount:b,decreaseCount:d,updateAccountInfo:R,isTableView:u,isSelected:_.includes(m.name),onToggleSelect:()=>P(m.name),statusSuccessColor:C,defaultAccount:n?.default_account},m.name))})})})]})}function qe({account:e,onToggle:n,increaseCount:t,decreaseCount:s,updateAccountInfo:a,isTableView:c=!1,isSelected:r=!1,onToggleSelect:i,statusSuccessColor:o,tableBgColor:l,defaultAccount:b}){const d=N(),u=H(),h=e.name,_=H(),f=H(),g=T("gray.100","gray.700"),p=()=>{u.onOpen(),t(),d({status:"info",title:`开始为${h}清理日常...`}),Zn(h).then(w=>{d({status:"success",title:`${h}清日常成功`}),u.onClose(),s(),a(w)}).catch(w=>{u.onClose(),s(),d({status:"error",title:`${h}清日常失败`,description:w?.response?.data||"网络错误"})})};Ux.set(e.name,p);const j=()=>{dt(h).then(w=>{d({status:"success",title:"删除账号成功",description:w}),n()}).catch(w=>{d({status:"error",title:"删除账号失败",description:w?.response?.data||"网络错误"})})},k=()=>{d({status:"info",title:`正在获取${h}的日常结果...`}),xs(h).then(async w=>{d({status:"success",title:"获取日常结果成功"}),await B.show(_e,{alias:h,title:"日常",resultInfo:w})}).catch(async w=>{d({status:"error",title:"获取日常结果失败",description:await(w?.response?.data).text()||"网络错误"})})},C=()=>{it(h).then(w=>{d({status:"success",title:`同步${h}配置成功`,description:w}),f.onClose()}).catch(w=>{d({status:"error",title:"同步配置失败",description:w?.response?.data||"网络错误"})})},v=Fx.useRef(null);return c?x.jsxs(sx,{bg:l,_hover:{bg:g,transition:"background-color 0.2s"},children:[x.jsx($,{px:3,py:2,children:x.jsx(K,{isChecked:r,onChange:i,colorScheme:"blue"})}),x.jsx($,{px:0,py:2,children:x.jsxs(F,{alignItems:"center",flexWrap:"wrap",sx:{"@media screen and (max-width: 768px)":{flexDirection:"column",alignItems:"flex-start"}},children:[x.jsx(Z,{wordBreak:"break-word",fontSize:"md",fontWeight:"medium",children:e.name}),b===e.name&&x.jsx(qx,{size:"sm",colorScheme:"purple",mt:2,mb:2,children:"默认"}),e.clan_forbid&&x.jsx(qx,{size:"sm",colorScheme:"red",mt:2,mb:2,children:"公会期间禁用"})]})}),x.jsx($,{px:3,py:2,children:x.jsx(lx,{children:x.jsxs(Z,{fontWeight:"medium",color:e.daily_clean_time.status==="成功"?o:e.daily_clean_time.status==="警告"?"yellow.500":"red.500",fontSize:"md",children:[e.daily_clean_time.status==="成功"?"✓":e.daily_clean_time.status==="警告"?"!":"×"," "+e.daily_clean_time.time]})})}),x.jsx($,{px:3,py:2,children:x.jsxs(lx,{spacing:{base:2,md:4},children:[x.jsx(nx,{label:"配置",children:x.jsx(cx,{as:mx,to:`${rx.to||""}${e.name}`,"aria-label":"AccountConfig",icon:x.jsx(le,{}),size:"sm",colorScheme:"pink",display:{base:"flex",md:"none"}})}),x.jsx(A,{as:mx,to:`${rx.to||""}${e.name}`,size:"sm",fontWeight:"normal",colorScheme:"pink",leftIcon:x.jsx(le,{}),display:{base:"none",md:"flex"},children:"配置"}),x.jsx(nx,{label:"清理日常",children:x.jsx(cx,{"aria-label":"DailyClean",icon:x.jsx(Tx,{}),size:"sm",colorScheme:"orange",onClick:p,isLoading:u.isOpen,display:{base:"flex",md:"none"}})}),x.jsx(A,{size:"sm",fontWeight:"normal",colorScheme:"orange",leftIcon:x.jsx(Tx,{}),onClick:p,isLoading:u.isOpen,display:{base:"none",md:"flex"},children:"清理"}),x.jsx(nx,{label:"结果",children:x.jsx(cx,{"aria-label":"DailyResult",icon:x.jsx(de,{}),size:"sm",colorScheme:"green",onClick:k,display:{base:"flex",md:"none"}})}),x.jsx(A,{size:"sm",fontWeight:"normal",colorScheme:"green",leftIcon:x.jsx(de,{}),onClick:k,display:{base:"none",md:"flex"},children:"结果"})]})})]},h):x.jsxs(xe,{children:[x.jsx(ee,{children:x.jsxs(F,{children:[x.jsxs(Yt,{value:h,children:[" ",h," "]}),x.jsx(te,{}),x.jsx(Ke,{"aria-label":"DeleteAccount",onClick:_.onOpen}),x.jsx(Cx,{leastDestructiveRef:v,isOpen:_.isOpen,onClose:_.onClose,title:"删除账号",body:`确定删除账号${h}吗？`,onConfirm:j,children:" "})]})}),x.jsxs(ne,{children:["最近清日常： ",e.daily_clean_time.status=="成功"?"✓":e.daily_clean_time.status=="警告"?"!":"×",e.daily_clean_time.time,e.clan_forbid?x.jsx(Z,{children:"公会期间禁用"}):""]}),x.jsx(Ze,{children:x.jsxs(yx,{columns:2,spacing:4,children:[x.jsx(A,{colorScheme:"pink",fontWeight:"normal",as:mx,to:rx.to+h,"aria-label":"AccountConfig",leftIcon:x.jsx(le,{}),isLoading:u.isOpen,name:h,children:"配置"}),x.jsx(A,{colorScheme:"orange",fontWeight:"normal","aria-label":"DailyClean",leftIcon:x.jsx(Tx,{}),isLoading:u.isOpen,name:h,onClick:p,children:"清理日常"}),x.jsx(A,{colorScheme:"teal",fontWeight:"normal","aria-label":"DailySync",leftIcon:x.jsx(We,{}),isLoading:u.isOpen,name:h,onClick:f.onOpen,children:"同步配置"}),x.jsx(Cx,{leastDestructiveRef:v,isOpen:f.isOpen,onClose:f.onClose,title:"同步配置",body:`确定将其他账号配置同步为${h}的配置吗？`,onConfirm:C,children:" "}),x.jsxs(A,{colorScheme:"green",fontWeight:"normal","aria-label":"DailyResult",leftIcon:x.jsx(de,{}),isLoading:u.isOpen,onClick:k,name:h,children:[" ","结果"," "]})]})})]},h)}const rx=bx("/daily/_sidebar/account/")({component:Bn});function Fn(){const e=Me(),n=Xe(),{toast:t}=xt({theme:n}),{handleSubmit:s,register:a,formState:{isSubmitting:c,errors:r}}=Yx(),[i,o]=I.useState(localStorage.getItem("remember")==="true"),l=u=>{localStorage.setItem("remember",i?"true":"false"),i?(localStorage.setItem("qq",u.qq),localStorage.setItem("password",u.password)):(localStorage.removeItem("qq"),localStorage.removeItem("password"))},b=u=>{pn(u.qq,u.password).then(async h=>{l(u),t({title:"登录成功",status:"success",description:h}),await e({to:rx.to})}).catch(h=>{t({title:"登录失败",status:"error",description:h.response?.data||"网络错误"})})},d=u=>{yn(u.qq,u.password).then(async h=>{l(u),t({title:"注册成功",status:"success",description:h}),await e({to:rx.to})}).catch(h=>{t({title:"注册失败",status:"error",description:h.response?.data||"网络错误"})})};return x.jsx(M,{rounded:"lg",p:8,children:x.jsx("form",{onSubmit:s(b),children:x.jsxs(q,{spacing:4,children:[x.jsxs(G,{id:"qq",children:[x.jsx(ax,{children:"QQ"}),x.jsx(Y,{type:"text",...a("qq"),placeholder:"5位以上",defaultValue:localStorage.getItem("qq")}),x.jsx(jx,{children:r.qq?.message})]}),x.jsxs(G,{id:"password",children:[x.jsx(ax,{children:"密码"}),x.jsx(Y,{type:"password",...a("password"),placeholder:"8位以上,非QQ密码",defaultValue:localStorage.getItem("password")}),x.jsx(jx,{children:r.password?.message})]}),x.jsxs(q,{spacing:10,children:[x.jsxs(q,{direction:{base:"column",sm:"row"},align:"start",justify:"space-between",children:[x.jsx(K,{defaultChecked:i,checked:i,onChange:u=>o(u.target.checked),children:"记住我"}),x.jsx(nx,{label:"联系维护人员",children:x.jsx(Z,{color:"blue.400",children:" 忘记密码？"})})]}),x.jsx(A,{bg:"blue.400",color:"white",_hover:{bg:"blue.500"},isLoading:c,type:"submit",children:"登录"}),x.jsx(A,{bg:"blue.400",color:"white",_hover:{bg:"blue.500"},onClick:s(d),children:"注册"})]})]})})})}const rt="/daily/assets/autopcr-x7688d1P.svg",se=bx("/daily/login")({component:$n});function $n(){const{toggleColorMode:e}=et();return x.jsx(F,{height:"100vh",align:"center",justify:"center",bg:T("gray.100","gray.800"),children:x.jsxs(xe,{children:[x.jsx(ee,{children:x.jsx(Xx,{onClick:e,src:rt,alt:"autopcr"})}),x.jsx(ne,{children:x.jsx(Fn,{})})]})})}const E=xx;(function(e,n){const t={_0x37a8de:336,_0x424f3c:313,_0x53e14e:345},s=xx,a=e();for(;;)try{if(-parseInt(s(342))/1+-parseInt(s(324))/2+-parseInt(s(340))/3+-parseInt(s(t._0x37a8de))/4*(-parseInt(s(320))/5)+-parseInt(s(t._0x424f3c))/6+-parseInt(s(t._0x53e14e))/7+parseInt(s(344))/8===n)break;a.push(a.shift())}catch{a.push(a.shift())}})(Vx,-1*-1355399+1*-17657+20027*-26);const En=function(){let e=!0;return function(n,t){const s=e?function(){const a=xx;if(t){const c=t[a(356)](n,arguments);return t=null,c}}:function(){};return e=!1,s}}(),pe=En(void 0,function(){const e={_0x427d63:325,_0x2f3c5a:349,_0x4ac42f:334,_0x338689:331},n=xx,t={};t[n(331)]=n(311)+"+$";const s=t;return pe[n(e._0x427d63)]().search(s.CzPsB)[n(325)]()[n(e._0x2f3c5a)+"r"](pe)[n(e._0x4ac42f)](s[n(e._0x338689)])});pe();const Rx=function(){let e=!0;return function(n,t){const s=e?function(){if(t){const a=t.apply(n,arguments);return t=null,a}}:function(){};return e=!1,s}}(),qn=Rx(void 0,function(){const e={_0x5742ce:354,_0x41df22:318,_0x4c6f4d:306,_0x4a86e1:353,_0x3515ac:351,_0x4dcc88:316,_0x5590a1:315,_0x28ce43:341,_0x4e07d0:335,_0x5e33df:325,_0x3f1bba:325},n={_0x252d64:323,_0x5cba4c:348},t=xx,s={DMRbw:function(o,l){return o(l)},ZtieH:function(o,l){return o+l},mFNLm:"return (function() ",FuARo:t(e._0x5742ce)+'ctor("retu'+t(314)+" )",Yqgwv:t(355),ZUVku:t(e._0x41df22),BLSxD:t(358),FRPIj:"exception",MZIFN:t(347)},a=function(){const o=t;let l;try{l=s[o(n._0x252d64)](Function,s[o(332)](s[o(350)]+s[o(n._0x5cba4c)],");"))()}catch{l=window}return l},c=a(),r=c[t(e._0x4c6f4d)]=c.console||{},i=[s[t(e._0x4a86e1)],s[t(e._0x3515ac)],t(e._0x4dcc88),s[t(e._0x5590a1)],s[t(e._0x28ce43)],"table",s[t(339)]];for(let o=65*-77+3*-217+-56*-101;o<i[t(e._0x4e07d0)];o++){const l=Rx[t(349)+"r"][t(337)].bind(Rx),b=i[o],d=r[b]||l;l[t(346)]=Rx.bind(Rx),l[t(e._0x5e33df)]=d[t(e._0x3f1bba)][t(352)](d),r[b]=l}});qn();Le[E(327)].withCredentials=!0;const ge={};function Vx(){const e=["Aw50zxjJzxb0BW","zxjYB3i","y29UC29Szq","CMvQzwn0","AgvHzgvYCW","BI9QC29U","yxbWBgLJyxrPBW","kcGOlISPkYKRkq","y3jLyxrL","nJeXnJK0nNHbrxfRua","CM4GDgHPCYiPka","qKXtEeq","Aw5MBW","Bg9JyxrPB24","D2fYBG","l2rHAwX5l2fWAq","nJuWmtveqNvYsKS","q29UDgvUDc1uEq","CMvZCg9UC2u","re1syNC","nJyWnte2zhvhz09j","Dg9tDhjPBMC","yMfZzvvsta","zgvMyxvSDhm","Aw9U","D2L0AenYzwrLBG","DgLTzw91Da","q3PqC0i","wNrPzuG","C3rHDhvZ","C2vHCMnO","BgvUz3rO","ndm2q2rjEM1f","ChjVDg90ExbL","zMvTrxG","tvPjrK4","mtC2mJq5mw5yr1rLqG","rLjqswO","mZGXmde3wfjdCe1i","wc1bufaTvMvYCW","mJq0mJy0mtzUsNP3BMC","otm0nZi4mNf1rLf6zG","x19WCM90B19F","DhjHy2u","rNvbuM8","y29UC3rYDwn0BW","Buzotg0","wLvwA3u","yMLUza","wxfND3y","E30Uy29UC3rYDq","Bg9N","yxbWBhK"];return Vx=function(){return e},Vx()}ge["Content-Type"]="applicatio"+E(309),ge[E(343)+E(328)]="1.6.0";const Dx={};Dx[E(326)]=E(319)+"/",Dx.timeout=1e4,Dx.withCredentials=!0,Dx[E(308)]=ge;const D=Le[E(312)](Dx),me={};me[E(321)+"pe"]=E(310)+E(309),me[E(343)+E(328)]="1.6.0";const Bx={};Bx[E(330)]=1e4,Bx[E(329)+"tials"]=!0,Bx[E(308)]=me;const ot=Le.create(Bx);function xx(e,n){const t=Vx();return xx=function(s,a){s=s-306;let c=t[s];if(xx.JtxmrC===void 0){var r=function(b){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let u="",h="",_=u+r;for(let f=0,g,p,j=0;p=b.charAt(j++);~p&&(g=f%4?g*64+p:p,f++%4)?u+=_.charCodeAt(j+10)-10!==0?String.fromCharCode(255&g>>(-2*f&6)):f:0)p=d.indexOf(p);for(let f=0,g=u.length;f<g;f++)h+="%"+("00"+u.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(h)};xx.yABzFd=r,e=arguments,xx.JtxmrC=!0}const i=t[-2716+2716*1],o=s+i,l=e[o];if(l)c=l;else{const b=function(d){this.FWVLUR=d,this.uMakzG=[1,0,0],this.AalplQ=function(){return"newState"},this.Oxwjsm="\\w+ *\\(\\) *{\\w+ *",this.krqEDl=`['|"].+['|"];? *}`};b.prototype.ShtkHy=function(){const d=new RegExp(this.Oxwjsm+this.krqEDl),u=d.test(this.AalplQ.toString())?--this.uMakzG[115*-32+2874+1*807]:--this.uMakzG[0];return this.NiBFYy(u)},b.prototype.NiBFYy=function(d){return~d?this.rextoD(this.FWVLUR):d},b.prototype.rextoD=function(d){for(let u=575*-16+-157*61+18777,h=this.uMakzG.length;u<h;u++)this.uMakzG.push(Math.round(Math.random())),h=this.uMakzG.length;return d(this.uMakzG[1*5050+101*-29+-2121])},new b(xx).ShtkHy(),c=xx.yABzFd(c),e[o]=c}return c},xx(e,n)}D[E(357)+"rs"][E(322)].use(e=>e,e=>{const n={_0x1e30bf:338,_0x3c8d5d:333,_0xe42634:317},t=E,s={};return s[t(338)]=function(c,r){return c===r},s[t(n._0x1e30bf)](e?.[t(322)]?.[t(n._0x3c8d5d)],-4414*1+3021+3*598)&&(window[t(n._0xe42634)].href=se.to),Promise[t(307)](e)});function Hx(){const e=["vwjLuNK","tgjWs3G","BgvUz3rO","l2nVBMzPzW","rgDXtuS","yMf0y2HFywnJBW","qvHyB2e","l2fJy291BNq","BxvSDgLWyxj0lW","l2rVx3nPBMDSzq","zg5dqxe","yMLUza","y29UC29Szq","D2fYBG","DhjHy2u","l3vZzxiV","BMn0Aw9UkcKG","y2f0y2G","mtG5mdeWnvLNzNDlDa","wKTND1G","m3DUwNPoBq","wfHnz0W","BxbVCNq","y2HHBgXLBMDL","vvjm","q2TtywW","l3jVBgu","s0HWq2C","mtCZnJH3CKfur3i","zM9YBs1KyxrH","ywnJCW","D3HszLm","C3vSDc8","AwrHDgu","Aw5MBW","swrcDLG","DNnUrwG","l2fJy291BNqVAq","z2v0","DwX0lW","y29UC3rYDwn0BW","r0HKz2C","Chv0","ode1mZm4wvv2zhvj","Cg9ZDa","C2vHCMnO","l2rHAwX5x3jLCW","zMLSzq","E30Uy29UC3rYDq","DgHLBG","zgf0yq","zuXQrue","B3jKzxi","DMHlD0e","B2fACMe","rKvdque","mtu0mtiYnJbAvMHRwhm","zxjYB3i","DwX0","ChjVDg90ExbL","zw5mBMW","CgfZC3DVCMq","l3zHBgLKyxrL","kcGOlISPkYKRkq","Bg9N","mZe2nZeZEfvhvhLx","zgvSzxrL","p3rLEhq9","yxbWBhK","Dg9tDhjPBMC","ywXPyxm","q255Chu","Dw50CW","mtaXoti4nNLqEvnhsa","y3rvuKW","nZq3txHtvgDP","uwvACwq","y2HHBM5LBa","nZzqyvPQtMy","Au96DNy","s3rxEuC","l2fJy291BNqV","D2LVC0u","DgfIBgu","l3vZzxi","DxnLCM5HBwu","y3jLyxrLt2jQzq","mta4odCWzefdq2DZ","l2nSyw5FzM9YyG","DMn1BKm","l3nPBMDSzv9Yzq"];return Hx=function(){return e},Hx()}(function(e,n){const t={_0x34e943:192,_0x2c437f:170,_0x5dd83d:200,_0x22a13b:236,_0x2e654a:246,_0x5ad630:202},s=O,a=e();for(;;)try{if(-parseInt(s(t._0x34e943))/1+parseInt(s(t._0x2c437f))/2*(-parseInt(s(238))/3)+-parseInt(s(205))/4*(parseInt(s(214))/5)+-parseInt(s(t._0x5dd83d))/6+parseInt(s(t._0x22a13b))/7+-parseInt(s(t._0x2e654a))/8*(parseInt(s(t._0x5ad630))/9)+parseInt(s(183))/10===n)break;a.push(a.shift())}catch{a.push(a.shift())}})(Hx,407152+20585*20+-495773);const Nn=function(){let e=!0;return function(n,t){const s=e?function(){if(t){const a=t.apply(n,arguments);return t=null,a}}:function(){};return e=!1,s}}(),je=Nn(void 0,function(){const e={_0x1e78c2:172,_0x59f9a8:239,_0x1a9a4e:167},n=O,t={};t.XXMgL=n(190)+"+$";const s=t;return je[n(196)]()[n(e._0x1e78c2)](s[n(e._0x59f9a8)])[n(196)]()[n(e._0x1a9a4e)+"r"](je)[n(e._0x1e78c2)]("(((.+)+)+)+$")});je();const Ax=function(){const e={_0x3128de:195};let n=!0;return function(t,s){const a=n?function(){const c=O;if(s){const r=s[c(e._0x3128de)](t,arguments);return s=null,r}}:function(){};return n=!1,a}}(),Pn=Ax(void 0,function(){const e={_0x12f26d:234,_0x79646c:210,_0x5e3527:232,_0x435df5:243,_0x511ac1:180,_0x2c91c8:224,_0x6ee5e6:230,_0x3c8970:230,_0x3ace45:245,_0x173dce:206,_0x2f1fa5:178,_0x906149:220,_0x9653f1:229,_0x3c4889:196},n=O,t={CkSal:function(r,i){return r(i)},vhKwA:function(r,i){return r+i},GHdgg:"return (fu"+n(e._0x12f26d),oaZra:n(175)+'ctor("return this")( )',AXXoa:function(r){return r()},KHpCg:n(191),dnCAq:n(231),aphXj:n(252),iOzvv:"exception",eLjEA:n(e._0x79646c),MfrPr:n(e._0x5e3527),wxRfS:function(r,i){return r<i}};let s;try{const r=t[n(e._0x435df5)](Function,t[n(e._0x511ac1)](t[n(180)](t[n(168)],t[n(181)]),");"));s=t[n(e._0x2c91c8)](r)}catch{s=window}const a=s[n(e._0x6ee5e6)]=s[n(e._0x3c8970)]||{},c=[t[n(e._0x3ace45)],t[n(228)],t.aphXj,n(184),t[n(e._0x173dce)],t[n(e._0x2f1fa5)],t.MfrPr];for(let r=-14998+-7499*-2;t[n(249)](r,c[n(e._0x906149)]);r++){const i=Ax.constructor[n(186)][n(229)](Ax),o=c[r],l=a[o]||i;i.__proto__=Ax[n(e._0x9653f1)](Ax),i[n(e._0x3c4889)]=l.toString.bind(l),a[o]=i}});Pn();function Fe(){const e={_0x292771:244},n={_0x159927:165,_0x44278a:176},t=O,s={vsnEh:t(e._0x292771),DgqMK:function(r){return r()}},[a,c]=s[t(222)](I.useState);return I.useEffect(()=>{const r=t;D[r(n._0x159927)](s[r(163)])[r(n._0x44278a)](i=>{c(i.data)})[r(235)](()=>{})},[]),a}async function Wn(){const e={_0x5a5e4c:237,_0x169928:165,_0x370757:177},n=O,t={};t[n(e._0x5a5e4c)]="/clan_forbid";const s=t;return(await D[n(e._0x169928)](s[n(237)]))[n(e._0x370757)]}async function Vn(e){const n={_0x11a7ca:219,_0x2a3858:248,_0x3cae36:169,_0x105f52:177},t=O,s={};s[t(n._0x11a7ca)]=t(215)+"id";const a=s,c={};return c[t(n._0x2a3858)]=e,(await D[t(n._0x3cae36)](a[t(n._0x11a7ca)],c))[t(n._0x105f52)]}async function Hn(){const e={_0x55bf8c:253},n=O,t={};t[n(253)]=n(225);const s=t;return(await D.get(s[n(e._0x55bf8c)]))[n(177)]}async function Ne(e){const n=O;return(await D.put(n(225),e))[n(177)]}async function Qn(e){const n={_0x280f91:164,_0x3787d0:207,_0x1cf47d:177},t=O,s={};s[t(203)]=t(174),s[t(198)]=t(n._0x280f91)+t(240),s[t(n._0x3787d0)]=t(226)+t(247);const a=s,c=new FormData;return c.append(a[t(203)],e),(await D[t(171)](a.Cnypu,c,{headers:{"Content-Type":a.KtWyG}}))[t(n._0x1cf47d)]}async function Gn(e){const n=O,t={};return t[n(197)]=e,(await D[n(171)](n(225),t)).data}async function Yn(){const e=O;return(await D[e(193)]("/"))[e(177)]}function O(e,n){const t=Hx();return O=function(s,a){s=s-(947+-392*2);let c=t[s];if(O.jNoERE===void 0){var r=function(b){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let u="",h="",_=u+r;for(let f=0,g,p,j=0;p=b.charAt(j++);~p&&(g=f%4?g*64+p:p,f++%4)?u+=_.charCodeAt(j+10)-10!==0?String.fromCharCode(255&g>>(-2*f&6)):f:0)p=d.indexOf(p);for(let f=0,g=u.length;f<g;f++)h+="%"+("00"+u.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(h)};O.diLYiv=r,e=arguments,O.jNoERE=!0}const i=t[-6881+7*983],o=s+i,l=e[o];if(l)c=l;else{const b=function(d){this.CuKszX=d,this.KiNpKC=[1,0,0],this.JBknBD=function(){return"newState"},this.fwetWe="\\w+ *\\(\\) *{\\w+ *",this.oNxvgb=`['|"].+['|"];? *}`};b.prototype.OwakhA=function(){const d=new RegExp(this.fwetWe+this.oNxvgb),u=d.test(this.JBknBD.toString())?--this.KiNpKC[89*-106+-27*-173+-1588*-3]:--this.KiNpKC[-9866+1*9866];return this.psTKbL(u)},b.prototype.psTKbL=function(d){return~d?this.IxcKHZ(this.CuKszX):d},b.prototype.IxcKHZ=function(d){for(let u=-3776*1+-8406+12182,h=this.KiNpKC.length;u<h;u++)this.KiNpKC.push(Math.round(Math.random())),h=this.KiNpKC.length;return d(this.KiNpKC[-19*-482+-515*12+-1*2978])},new b(O).OwakhA(),c=O.diLYiv(c),e[o]=c}return c},O(e,n)}async function Jn(){const e=O;return(await D.delete(e(225)))[e(177)]}async function it(e){const n={_0x382fdc:197},t=O,s={};return s[t(n._0x382fdc)]=e,(await D[t(171)]("/account/sync",s)).data}async function lt(e){const n={_0x52d5f5:177},t=O;return(await D.get("/account/"+e))[t(n._0x52d5f5)]}async function dt(e){const n={_0x1eb00a:193},t=O;return(await D[t(n._0x1eb00a)]("/account/"+e))[t(177)]}async function Kn(e,n,t,s,a){const c={_0x5e26eb:212,_0x34cbc:223,_0x42a45b:199,_0x1d1142:208},r=O,i={};return i[r(c._0x5e26eb)]=n,i[r(188)]=t,i[r(204)]=s,i[r(c._0x34cbc)+r(c._0x42a45b)]=a,(await D.put(r(c._0x1d1142)+e,i)).data}async function ye(e,n){const t={_0x3f06cb:165,_0x5a6975:208,_0x19e067:177},s=O;return(await D[s(t._0x3f06cb)](s(t._0x5a6975)+e+"/"+n))[s(t._0x19e067)]}async function fx(e,n,t){const s={};return s[n]=t,ft(e,s)}async function ft(e,n){const t={_0x416f71:169},s=O;return(await D[s(t._0x416f71)](s(208)+e+s(221),n))[s(177)]}async function Zn(e){const n=O,t={};return t.timeout=(-11420+-2*-5715)*(-433*7+-7607+-3*-3566)*(6731*-1+3*697+5640),(await D.post(n(208)+e+"/do_daily",{},t))[n(177)]}async function Xn(e,n){const t={_0x31b613:182,_0x26af2c:179,_0x40439b:171,_0x2490a2:208,_0x59b87d:182,_0x14d666:182},s=O,a={};a[s(t._0x31b613)]=function(o,l){return o*l};const c=a,r={};return r[s(t._0x26af2c)]=n,(await D[s(t._0x40439b)](s(t._0x2490a2)+e+s(227),r,{timeout:c[s(t._0x59b87d)](c[s(t._0x14d666)](-5796+-5806*-1,60),-2*-1238+3197+-4673*1)})).data}async function xs(e){const n={_0xc312a2:165,_0x3c79d8:177},t=O;return(await D[t(n._0xc312a2)](t(208)+e+("/daily_res"+t(185))))[t(n._0x3c79d8)]}async function es(e,n){const t={_0x3764cc:165,_0x53878f:217,_0x4c3f72:250},s=O;return(await D[s(t._0x3764cc)](s(208)+e+(s(t._0x53878f)+s(t._0x4c3f72))+n))[s(177)]}async function ts(){const e={_0x20be69:211,_0xa9b4f6:187,_0x42aec4:177},n=O,t={};t.enLnl=n(e._0x20be69);const s=t;return(await D[n(165)](s[n(e._0xa9b4f6)]))[n(e._0x42aec4)]}async function ns(e,n){const t={_0x56b3f9:171},s=O;return(await D[s(t._0x56b3f9)](s(233)+e,n)).data}async function ss(e,n){return(await D[O(169)]("/user/"+e,n)).data}async function cs(e){const n=O;return(await D[n(193)](n(233)+e))[n(177)]}async function as(e,n,t,s){const a={_0x58edba:171,_0x375b1b:189},c=O,r={};return r.id=e,r[c(241)]=n,r.validate=t,r.userid=s,(await D[c(a._0x58edba)](c(a._0x375b1b),r)).data}function rs({id:e,userid:n,gt:t,challenge:s,onClose:a}){const c=N(),r=i=>{const{geetest_challenge:o,geetest_validate:l}=i;as(e,o,l,n).then(()=>{typeof a>"u"?window.close():a()}).catch(b=>{c({title:"发送验证信息失败",status:"error",description:b?.response?.data||"网络问题"})})};return x.jsx(Dt,{gt:t,challenge:s,onSuccess:r,https:!0,width:"300px",captch_type:1,gs:1,offline:!1})}const ut=bx("/daily/validate")({validateSearch:e=>({id:e.id||"",userid:e.userid||"",gt:e.gt||"",challenge:e.challenge||""}),component:os});function os(){const{id:e,userid:n,gt:t,challenge:s}=ut.useSearch();return x.jsx(F,{height:"100vh",align:"center",justify:"center",bg:T("gray.50","gray.800"),children:x.jsx(rs,{id:e,userid:n,gt:t,challenge:s})})}const is=B.create(()=>{const e=Fe(),n=hx(),t=N(),{handleSubmit:s,register:a,formState:{isSubmitting:c,errors:r}}=Yx(),i=o=>{ns(o.qq,o).then(async l=>{t({status:"success",title:"创建用户成功",description:l}),n.resolve(),await n.hide()}).catch(l=>{t({status:"error",title:"创建用户失败",description:l?.response?.data||"网络错误"})})};return x.jsxs(_x,{closeOnOverlayClick:!1,isOpen:n.visible,onClose:n.hide,children:[x.jsx(dx,{}),x.jsxs(px,{children:[x.jsx(ox,{children:"创建用户"}),x.jsx(gx,{}),x.jsx(ix,{children:x.jsx("form",{onSubmit:s(i),children:x.jsxs(q,{spacing:4,children:[x.jsxs(G,{isInvalid:!!r.qq,children:[x.jsx(ax,{children:"QQ"}),x.jsx(Y,{type:"text",...a("qq",{required:"QQ 不能为空",minLength:{value:5,message:"QQ号长度至少 5 位"}}),placeholder:"5位以上"}),x.jsx(jx,{children:r.qq?.message})]}),x.jsxs(G,{isInvalid:!!r.password,children:[x.jsx(ax,{children:"密码"}),x.jsx(Y,{type:"password",...a("password",{required:"请输入密码",minLength:{value:5,message:"密码长度至少 5 位"}}),placeholder:"请输入密码"}),x.jsx(jx,{children:r.password?.message})]}),x.jsx(G,{children:x.jsx(K,{...a("clan"),children:"公会管理"})}),x.jsx(G,{children:x.jsx(K,{...a("disabled"),children:"禁用"})}),e?.super_user&&x.jsx(G,{children:x.jsx(K,{...a("admin"),children:"管理员"})}),x.jsx(A,{bg:"blue.400",color:"white",_hover:{bg:"blue.500"},isLoading:c,type:"submit",children:"创建"})]})})})]})]})}),ls=B.create(({accs:e})=>{const n=hx(),t=N(),{handleSubmit:s,register:a,formState:{isSubmitting:c}}=Yx(),r=i=>{Vn(i.accs).then(async o=>{t({status:"success",title:"创建会战禁用成功",description:o}),n.resolve(),await n.hide()}).catch(o=>{t({status:"error",title:"创建会战禁用失败",description:o?.response?.data||"网络错误"})})};return x.jsxs(_x,{closeOnOverlayClick:!1,isOpen:n.visible,onClose:n.hide,children:[x.jsx(dx,{}),x.jsxs(px,{children:[x.jsx(ox,{children:"设置会战禁用"}),x.jsx(gx,{}),x.jsx(ix,{children:x.jsx("form",{onSubmit:s(r),children:x.jsxs(q,{spacing:4,children:[x.jsx(G,{id:"accs",isRequired:!0,children:x.jsx(Be,{...a("accs"),placeholder:"禁用账号（是游戏账号噢）",h:"50vh",defaultValue:e,size:"md"})}),x.jsx(A,{bg:"blue.400",color:"white",_hover:{bg:"blue.500"},isLoading:c,type:"submit",children:"提交"})]})})})]})]})});function ds(){const e=N(),n=H(),[t,s]=I.useState();I.useEffect(()=>{ts().then(i=>{s(i)}).catch(i=>{e({status:"error",title:i?.response?.data||"网络错误"})})},[n.isOpen,e]);const a=Fe(),c=()=>{B.show(is,{}).then(()=>{n.onToggle()}).catch(()=>{})},r=()=>{Wn().then(async i=>{await B.show(ls,{accs:i})}).catch(i=>{e({status:"error",title:i?.response?.data||"网络错误"})})};return x.jsxs(q,{height:"100%",children:[x.jsx(q,{children:x.jsxs(yx,{spacing:2,templateColumns:"repeat(auto-fill, minmax(100px, 1fr))",children:[x.jsx(A,{colorScheme:"blue",onClick:c,children:"创建用户"}),x.jsx(A,{colorScheme:"blue",onClick:r,children:"设置会战禁用"})]})}),x.jsx(yx,{spacing:4,templateColumns:"repeat(auto-fill, minmax(250px, 1fr))",children:t?.map(i=>{const o=a?.super_user==!0,l=i.admin==!0&&a?.super_user==!0||i.admin==!1;return x.jsx(fs,{qq:i.qq,onToggle:n.onToggle,clan:i.clan,admin:i.admin,userDisabled:i.disabled,accountCount:i.account_count,allowEdit:l,allowManage:o},i.qq)})})]})}function fs({qq:e,userDisabled:n,clan:t,admin:s,accountCount:a,allowManage:c,allowEdit:r,onToggle:i}){const o=Fx.useRef(null),l=N(),b=H(),d=()=>{e!=null&&cs(e).then(k=>{l({status:"success",title:`删除用户${e}成功`,description:k}),b.onClose(),i()}).catch(k=>{l({status:"error",title:k?.response?.data||"网络错误"})})},u=(k,C)=>{e!=null&&ss(e,k).then(v=>{l({status:"success",title:`更新用户${e}成功`,description:v}),C(),i()}).catch(v=>{l({status:"error",title:v?.response?.data||"网络错误"})})},h=H(),_=()=>{u({disabled:!n},h.onClose)},f=H(),g=()=>{u({admin:!s},f.onClose)},p=()=>{u({clan:!t},f.onClose)},j=()=>{B.show(Wx,{}).then(k=>{u({password:k},()=>{B.hide(Wx).then(()=>{}).catch(()=>{})})}).catch(()=>{})};return x.jsxs(xe,{children:[x.jsx(ee,{children:x.jsxs(F,{children:[x.jsx(tt,{isChecked:!n,onChange:h.onOpen,isDisabled:!r,children:e}),x.jsx(te,{}),x.jsx(Ke,{"aria-label":"DeleteAccount",onClick:b.onOpen,isDisabled:!r}),x.jsx(Cx,{leastDestructiveRef:o,isOpen:b.isOpen,onClose:b.onClose,title:"删除用户",body:`确定删除用户${e}吗？`,onConfirm:d,children:" "}),x.jsx(Cx,{leastDestructiveRef:o,isOpen:h.isOpen,onClose:h.onClose,title:`${n?"启用":"禁用"}用户`,body:`确定${n?"启用":"禁用"}用户${e}吗？`,onConfirm:_,children:" "})]})}),x.jsx(ne,{children:x.jsxs(q,{children:[x.jsx(Z,{children:`${a} 个账户`}),x.jsx(K,{isChecked:t,onChange:p,isDisabled:!c,children:"公会管理"}),x.jsx(K,{isChecked:s,onChange:g,isDisabled:!c,children:"管理员"})]})}),x.jsx(Ze,{children:x.jsx(yx,{columns:2,spacing:4,children:x.jsx(A,{colorScheme:"pink","aria-label":"UserResetPassword",leftIcon:x.jsx(Mt,{}),onClick:j,isDisabled:!r,children:"重设密码"})})})]})}const ht=bx("/daily/_sidebar/user/")({component:ds}),ue=({icon:e,children:n,href:t,...s})=>{const a=nt({base:!0,md:!1});return x.jsx(M,{style:{textDecoration:"none"},_focus:{boxShadow:"none"},children:x.jsx(mx,{to:t,children:x.jsx(nx,{label:a?n:void 0,children:x.jsxs(F,{align:"center",p:a?"2":"4",mx:a?"1":"4",borderRadius:"lg",role:"group",cursor:"pointer",_hover:{bg:"cyan.400",color:"white"},...s,children:[e&&x.jsx(Zt,{mr:a?"0":"4",fontSize:"16",_groupHover:{color:"white"},as:e}),!a&&n]})})})})};function us(){const{colorMode:e,toggleColorMode:n}=et(),t=Xe(),{toast:s}=xt({theme:t}),a=Fe(),c=nt({base:!0,md:!1}),r=Me();I.useEffect(()=>{const o=new EventSource("/daily/api/query_validate");return o.onmessage=function(l){const b=JSON.parse(l.data);b.status!=="ok"&&window.open(b.url,"_blank")},o.onerror=function(l){console.error("Error receiving SSE",l)},()=>{o.close()}},[]);const i=()=>{gn().then(async o=>{s({title:"登出成功",description:o,status:"success"}),await r({to:se.to})}).catch(o=>{s({title:"登出失败",description:o.response?.data,status:"error"})})};return x.jsxs(F,{flexDirection:"column",height:"100vh",children:[x.jsx(M,{top:0,left:0,right:0,zIndex:10,bg:T("gray.200","gray.900"),px:2,children:x.jsxs(F,{h:16,alignItems:"center",justifyContent:"space-between",children:[x.jsx(M,{children:x.jsx(mx,{to:rx.to,children:x.jsx(Xx,{src:rt,alt:"autopcr",style:{width:"40px",height:"40px"}})})}),x.jsxs(lx,{as:"nav",spacing:c?1:4,children:[x.jsx(ue,{href:rx.to,icon:Lt,children:"一览"},"dashboard"),a?.admin&&x.jsx(ue,{href:ht.to,icon:Tt,children:"用户管理"},"user"),x.jsx(ue,{icon:Ve,onClick:i,children:"登出"},"logout")]}),x.jsx(F,{alignItems:"center",children:x.jsx(cx,{"aria-label":"Toggle color mode",icon:e==="light"?x.jsx(Jt,{}):x.jsx(Kt,{}),onClick:n,size:c?"sm":"md"})})]})}),x.jsx(F,{p:4,flex:1,overflow:"auto",flexDirection:"column",children:x.jsx(Pe,{})}),x.jsx(M,{position:"fixed",bottom:0,left:0,right:0,zIndex:10,bg:T("gray.200","gray.900"),px:4,textAlign:"right",children:x.jsxs(Z,{fontSize:"sm",color:"gray.500",children:["Powered by ",x.jsx("a",{href:"https://github.com/cc004/autopcr",children:"AutoPCR"})," ",x.jsx("a",{href:"https://github.com/Lanly109/AutoPCR_Web",children:"AutoPCR_Web"}),"：","1.6.0"]})})]})}const hs=bx("/daily/_sidebar")({component:us}),bt=B.create(({candidates:e,value:n})=>{const t=hx(),s=T("blue.100","blue.700"),a=T("red.100","red.700"),[c,r]=I.useState(n),[i,o]=I.useState(e.filter(S=>!n.includes(S.value))),[l,b]=I.useState(""),[d,u]=I.useState(""),[h,_]=I.useState(null),f=I.useRef(!1);t.visible&&!f.current&&(r(n),o(e.filter(S=>!n.includes(S.value))),b(""),u("")),f.current=t.visible;const g=S=>{c.includes(S)||(r([...c,S]),o(i.filter(L=>L.value!==S)))},p=S=>{r(c.filter(W=>W!==S));const L=e.find(W=>W.value===S);L&&o([...i,L])},j=()=>{t.resolve(c),t.remove()},k=()=>{t.remove()},C=(S,L)=>{if(S===L)return;const W=[...c],[oe]=W.splice(S,1);W.splice(L,0,oe),r(W)},v=S=>{_(S)},w=()=>{_(null)},y=S=>{S.preventDefault()},R=(S,L)=>{if(S.preventDefault(),h===null)return;const W=c.indexOf(h);W!==-1&&C(W,L)},V=()=>{r([]),o(e)},P=i.filter(S=>String(S.value).includes(l)||String(S.display).includes(l)||S.tags?.some(L=>L.toLowerCase().includes(l.toLowerCase()))),re=c.map(S=>e.find(W=>W.value===S)??{value:S,display:S,tags:[],nickname:null}).filter(S=>String(S.value).includes(d)||S.tags?.some(L=>L.toLowerCase().includes(d.toLowerCase())));return x.jsxs(_x,{isOpen:t.visible,onClose:t.hide,size:"xl",children:[x.jsx(dx,{}),x.jsxs(px,{children:[x.jsx(ox,{children:"选择"}),x.jsx(gx,{}),x.jsx(ix,{children:x.jsxs(F,{gap:4,children:[x.jsxs(M,{flex:1,children:[x.jsxs(Z,{mb:2,children:["未选择 (",i.length,")"]}),x.jsx(Y,{placeholder:"搜索",mb:2,value:l,onChange:S=>b(S.target.value)}),x.jsxs(M,{maxH:"55vh",overflowY:"auto",p:2,borderRadius:"md",children:[x.jsx(A,{size:"sm",colorScheme:"green",onClick:()=>{const S=P.map(L=>L.value);r([...new Set([...c,...S])]),o(i.filter(L=>!S.includes(L.value)))},children:"全选"}),P.map((S,L)=>x.jsx(M,{p:1,cursor:"pointer",_hover:{bg:s},onClick:()=>g(S.value),children:S.nickname?S.nickname:S.display},L))]})]}),x.jsxs(M,{flex:1,children:[x.jsxs(Z,{mb:2,children:["已选择 (",c.length,")"]}),x.jsx(Y,{placeholder:"搜索",mb:2,value:d,onChange:S=>u(S.target.value)}),x.jsxs(M,{maxH:"55vh",overflowY:"auto",p:2,borderRadius:"md",children:[x.jsxs(F,{mb:2,alignItems:"center",justifyContent:"space-between",children:[x.jsx(Z,{fontSize:"xs",color:"gray.500",children:"提示：拖拽可调整顺序"}),x.jsx(A,{onClick:V,size:"sm",colorScheme:"red",children:"清空"})]}),re.map(S=>{const L=c.indexOf(S.value);return x.jsx(F,{alignItems:"center",justifyContent:"space-between",_hover:{bg:a},children:x.jsxs(M,{p:1,cursor:"grab",draggable:!0,onDragStart:()=>v(S.value),onDragEnd:w,onDragOver:y,onDrop:W=>R(W,L),flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",children:[S.nickname?S.nickname:S.display,x.jsx(cx,{"aria-label":"移除",icon:x.jsx(Xt,{}),size:"xs",onClick:()=>p(S.value)})]})},String(S.value))})]})]})]})}),x.jsxs(Ue,{children:[x.jsx(A,{onClick:j,colorScheme:"blue",mr:3,children:"保存"}),x.jsx(A,{onClick:k,children:"取消"})]})]})]})});B.register("multiSelectModal",bt);function bs({alias:e,value:n,info:t}){switch(t?.config_type){case"bool":return x.jsx(_s,{alias:e,value:n,info:t});case"int":return x.jsx(ps,{alias:e,value:n,info:t});case"single":return x.jsx(gs,{alias:e,value:n,info:t});case"multi":return x.jsx(ms,{alias:e,value:n,info:t});case"time":return x.jsx(js,{alias:e,value:n,info:t});case"text":return x.jsx(ys,{alias:e,value:n,info:t});case"multi_search":return x.jsx(Cs,{alias:e,value:n,info:t})}}function _s({alias:e,value:n,info:t}){const s=N(),a=c=>{fx(e,t.key,c.target.checked).then(r=>{s({status:"success",title:"保存成功",description:r})}).catch(r=>{s({status:"error",title:"保存失败",description:r.response?.data||"网络错误"})})};return x.jsxs(wx,{children:[x.jsx(Sx,{children:t.desc}),x.jsx(st,{children:x.jsx(tt,{id:t.key,defaultChecked:n,onChange:a})})]})}function ps({alias:e,value:n,info:t}){const s=N(),a=(c,r)=>{fx(e,t.key,r).then(i=>{s({status:"success",title:"保存成功",description:i})}).catch(i=>{s({status:"error",title:"保存失败",description:i.response?.data||"网络错误"})})};return x.jsxs(wx,{children:[x.jsx(Sx,{children:t.desc}),x.jsxs(en,{onChange:a,id:t.key,defaultValue:n,min:Math.min(...t.candidates.map(c=>c.value)),max:Math.max(...t.candidates.map(c=>c.value)),children:[x.jsx(tn,{}),x.jsxs(nn,{children:[x.jsx(sn,{}),x.jsx(cn,{})]})]})]})}function gs({alias:e,value:n,info:t}){const s=N(),a=c=>{let r=c.target.value;const i=Number(r);isNaN(i)||(r=i),fx(e,t.key,r).then(o=>{s({status:"success",title:"保存成功",description:o})}).catch(o=>{s({status:"error",title:"保存失败",description:o.response?.data||"网络错误"})})};return x.jsxs(wx,{children:[x.jsx(Sx,{children:t.desc}),x.jsx(ct,{onChange:a,id:t.key,defaultValue:n,children:t.candidates.map(c=>x.jsx("option",{value:c.value,children:c.display},c.value))})]})}function ms({alias:e,value:n,info:t}){const s=N(),a=c=>{let r=c;const i=r.map(o=>Number(o));i.length!=0&&!isNaN(i[0])&&(r=i),fx(e,t.key,r).then(o=>{s({status:"success",title:"保存成功",description:o})}).catch(o=>{s({status:"error",title:"保存失败",description:o.response?.data||"网络错误"})})};return x.jsxs(wx,{children:[x.jsx(Sx,{style:{height:"auto"},children:t.desc}),x.jsx(M,{paddingLeft:"16px",paddingRight:"32px",overflowY:"scroll",borderWidth:"1px",borderColor:T("gray.200","gray.600"),borderRadius:"md",children:x.jsx(xn,{onChange:a,defaultValue:n.map(c=>String(c)),children:x.jsx(q,{spacing:[1,5],direction:["column","row"],children:t.candidates.map(c=>x.jsx(K,{value:String(c.value),children:c.display},c.value))})})})]})}function js({alias:e,value:n,info:t}){const s=N(),a=c=>{fx(e,t.key,c.target.value).then(r=>{s({status:"success",title:"保存成功",description:r})}).catch(r=>{s({status:"error",title:"保存失败",description:r.response?.data||"网络错误"})})};return x.jsxs(wx,{children:[x.jsx(Sx,{children:t.desc}),x.jsx(Y,{type:"time",onBlur:a,id:t.key,defaultValue:n})]})}function ys({alias:e,value:n,info:t}){const s=N(),a=r=>{fx(e,t.key,r.target.value).then(i=>{s({status:"success",title:"保存成功",description:i})}).catch(i=>{s({status:"error",title:"保存失败",description:i.response?.data||"网络错误"})})},c=r=>{r.target.style.height="auto",r.target.style.height=`${r.target.scrollHeight}px`};return x.jsxs(x.Fragment,{children:[x.jsx(Z,{children:t.desc}),x.jsx(Be,{onBlur:a,id:t.key,defaultValue:n,onInput:c})]})}function Cs({alias:e,value:n,info:t}){const s=N(),[a,c]=I.useState(n),r=a.map(o=>{const l=t.candidates.find(b=>b.value===o);return l?l.nickname?l.nickname:l.display:String(o)}),i=async()=>{try{const o=await B.show("multiSelectModal",{candidates:t.candidates,value:a}),l=await fx(e,t.key,o);c(o),s({status:"success",title:"保存成功",description:l}),await B.hide(bt)}catch(o){s({status:"error",title:"保存失败",description:o.response?.data||"网络错误"})}};return x.jsxs(wx,{children:[x.jsx(Sx,{children:t.desc}),x.jsx(Y,{value:r,isReadOnly:!0,onClick:i,cursor:"pointer"}),x.jsx(st,{children:x.jsx(A,{size:"sm",onClick:i,children:"选择"})})]})}function ws({alias:e,config:n,info:t,isOpen:s,onOpen:a,onClose:c,...r}){const i=N(),o=d=>{fx(e,t?.key,d.target.checked).then(u=>{i({status:"success",title:"保存成功",description:u})}).catch(u=>{i({status:"error",title:"保存失败",description:u.response?.data||"网络错误"})})},l=()=>{i({status:"info",title:"开始执行"+t?.name+"..."}),a(),Xn(e,t?.key).then(async d=>{i({status:"success",title:"执行成功"}),c(),await B.show(_e,{alias:e,title:t?.name,resultInfo:d})}).catch(async d=>{i({status:"error",title:"执行失败",description:await(d.response?.data).text()||"网络错误"}),c()})},b=()=>{i({status:"info",title:`正在获取${t?.name}的结果`}),a(),es(e,t?.key).then(async d=>{c(),await B.show(_e,{alias:e,title:t?.name,resultInfo:d})}).catch(async d=>{c(),i({status:"error",title:"获取结果失败",description:await(d.response?.data).text()||"网络错误"})})};return x.jsxs(xe,{colorScheme:"red",...r,children:[x.jsx(ee,{children:x.jsxs(F,{children:[x.jsx(K,{defaultChecked:n[t.key],onChange:o,children:x.jsxs(Lx,{size:"md",children:[t?.name," ",t?.tags.map(d=>x.jsx(qx,{children:d},d))]})}),x.jsx(te,{}),x.jsxs(lx,{children:[t?.runnable&&x.jsx(A,{size:"sm",colorScheme:"blue",isLoading:s,onClick:l,children:"执行"}),t?.runnable&&x.jsx(A,{size:"sm",colorScheme:"blue",isLoading:s,onClick:b,children:"结果"})]})]})}),x.jsx(ne,{children:x.jsxs(q,{divider:x.jsx(an,{}),spacing:"4",children:[t?.description&&x.jsxs(M,{children:[x.jsx(Lx,{size:"md",children:"描述"}),x.jsx(Z,{pt:"2",style:{whiteSpace:"pre-wrap"},fontSize:"sm",children:t?.description})]}),t?.config_order.length!=0&&x.jsx(M,{children:x.jsxs(q,{spacing:"4",children:[x.jsx(Lx,{size:"md",children:"设置项"}),t?.config_order.map(d=>x.jsx(bs,{alias:e,value:n[d],info:t.config[d]},d))]})})]})})]})}function Ss({tocList:e,...n}){return x.jsx(M,{bg:T("gray.50","gray.900"),borderRight:"1px",borderRightColor:T("gray.200","gray.700"),overflow:"scroll",...n,children:e.map((t,s)=>x.jsx(vs,{module_id:t.id,children:t.name},s))})}const vs=({module_id:e,children:n,...t})=>x.jsx(M,{as:"a",href:`#${e}`,style:{textDecoration:"none"},_focus:{boxShadow:"none"},onClick:s=>{s.preventDefault(),document.querySelector(`#${e}`)?.scrollIntoView({behavior:"smooth"})},children:x.jsx(F,{align:"center",p:"2",mx:"2",borderRadius:"lg",role:"group",cursor:"pointer",_hover:{bg:"cyan.400",color:"white"},...t,children:n})});function ks({alias:e,keys:n}){const[t,s]=I.useState(null),{isOpen:a,onOpen:c,onClose:r}=H();I.useEffect(()=>{e&&n&&ye(e,n).then(o=>{s(o)}).catch(o=>{console.log(o)})},[e,n]);const i=[];return t?.order.map(o=>{i.push({name:t.info[o].name,id:o})}),x.jsxs(M,{children:[x.jsx(q,{mr:"15px",children:t?.order.map(o=>x.jsx(ws,{id:o,alias:e,config:t?.config,info:t.info[o],isOpen:a,onOpen:c,onClose:r},o))}),x.jsx(F,{position:"fixed",right:"0",bottom:"50vh",justifyContent:"flex-end",alignItems:"center",children:x.jsxs(rn,{isLazy:!0,placement:"left",children:[x.jsx(on,{children:x.jsx(cx,{icon:x.jsx(Ve,{}),"aria-label":"TOC"})}),x.jsx(ln,{children:x.jsx(Ss,{maxH:"75vh",tocList:i})})]})})]})}function Is({accountInfo:e,onSaveSuccess:n}){const t=N(),[s,a]=I.useState(e?.username),[c,r]=I.useState(e?.password),[i,o]=I.useState(e?.channel),[l,b]=I.useState(e?.batch_accounts||[]),{isOpen:d,onOpen:u,onClose:h}=H(),[_,f]=I.useState(!1),[g,p]=I.useState([]);I.useEffect(()=>{if(e?.all_accounts&&e?.batch_accounts){const y=e.all_accounts.filter(R=>!e.batch_accounts.includes(R));p(y),f(e.batch_accounts.length===e.all_accounts.length)}},[e]);const j=y=>{y.preventDefault(),u(),Kn(e?.alias,s,c,i,l).then(R=>{t({title:"保存成功",description:R,status:"success"}),n&&n()}).catch(R=>{t({title:"保存失败",description:R.response?.data||"网络错误",status:"error"})}).finally(()=>{h()})},k=y=>{const R=y.target.checked;f(R),R?(b(e?.all_accounts?[...e.all_accounts]:[]),p([])):(b([]),p(e?.all_accounts?[...e.all_accounts]:[]))},C=y=>{l.includes(y)?(b(l.filter(R=>R!==y)),p([...g,y])):(b([...l,y]),p(g.filter(R=>R!==y)))},v=T("gray.50","gray.800"),w=T("blue.50","blue.900");return I.useEffect(()=>{e?.all_accounts&&f(l.length===e.all_accounts.length)},[l,e]),x.jsxs(q,{spacing:4,w:"full",bg:T("white","gray.700"),rounded:"xl",boxShadow:"lg",p:6,my:12,children:[x.jsx(Lx,{lineHeight:1.1,fontSize:{base:"2xl",sm:"3xl"},children:e?.alias}),x.jsx("form",{onSubmit:j,children:x.jsxs(q,{spacing:6,children:[e?.alias!="BATCH_RUNNER"&&x.jsxs(G,{id:"username",isRequired:!0,children:[x.jsx(ax,{children:"账号"}),x.jsx(Y,{placeholder:"手机号或账号",_placeholder:{color:"gray.500"},type:"text",defaultValue:e?.username||"",onChange:y=>a(y.target.value)})]}),e?.alias!="BATCH_RUNNER"&&x.jsxs(G,{id:"password",isRequired:!0,children:[x.jsx(ax,{children:"Password"}),x.jsx(Y,{placeholder:"密码",_placeholder:{color:"gray.500"},type:"password",defaultValue:e?.password||"",onChange:y=>r(y.target.value)})]}),e?.alias!="BATCH_RUNNER"&&x.jsxs(G,{id:"channel",isRequired:!0,children:[x.jsx(ax,{children:"平台"}),x.jsx(ct,{defaultValue:e?.channel,onChange:y=>o(y.target.value),children:e?.channel_option.map(y=>x.jsx("option",{value:y,children:y},y))})]}),e?.alias!="BATCH_RUNNER"&&x.jsx(A,{bg:"blue.400",color:"white",w:"full",isLoading:d,type:"submit",_hover:{bg:"blue.500"},children:"保存"}),e?.alias=="BATCH_RUNNER"&&x.jsxs(G,{id:"batch_account",children:[x.jsxs(F,{children:[x.jsx(ax,{children:"批量账号选择"}),x.jsx(te,{}),x.jsx(A,{bg:"blue.400",color:"white",isLoading:d,type:"submit",_hover:{bg:"blue.500"},children:"保存"})]}),x.jsx(K,{isChecked:_,onChange:k,mb:4,children:"全选"}),x.jsxs(F,{direction:{base:"column",md:"row"},gap:4,children:[x.jsxs(M,{flex:"1",borderWidth:"1px",borderRadius:"md",p:3,bg:v,children:[x.jsx(Z,{fontWeight:"bold",mb:2,children:"未选择的账号"}),x.jsx(Ee,{align:"start",spacing:2,children:g.map(y=>x.jsx(K,{isChecked:!1,onChange:()=>C(y),children:y},`unselected-${y}`))})]}),x.jsxs(M,{flex:"1",borderWidth:"1px",borderRadius:"md",p:3,bg:w,children:[x.jsx(Z,{fontWeight:"bold",mb:2,children:"已选择的账号"}),x.jsx(Ee,{align:"start",spacing:2,children:l.map(y=>x.jsx(K,{isChecked:!0,onChange:()=>C(y),children:y},`selected-${y}`))})]})]})]})]})})]})}const Rs=({alias:e,areas:n,onImportSuccess:t})=>{const s=N(),{isOpen:a,onOpen:c,onClose:r}=H(),i=()=>{c(),Promise.all(n.map(C=>ye(e,C.key))).catch(C=>{s({status:"error",title:"配置导出失败",description:C.response?.data||"网络错误"})}).then(C=>{if(!C)return;const v={};C.forEach((R,V)=>{v[n[V].key]=R.config});const w=btoa(encodeURIComponent(JSON.stringify(v))),y=new Blob([w],{type:"text/plain;charset=utf-8"});Ut.saveAs(y,`autopcr_${e}.autopcrcfg`),s({status:"success",title:"配置导出成功",description:"配置文件下载可能会有延迟，请稍后..."})}).catch(C=>{s({status:"error",title:"配置保存失败",description:C.message})}).finally(()=>{r()})},o=(C,v,w)=>{switch(C){case"bool":case"single":if(typeof w=="boolean")return w;break;case"int":if(typeof w=="number")return w;break;case"text":if(typeof w=="string")return w;break;case"time":if(typeof w=="string"&&w.match(/^\d{2}:\d{2}$/)!==null)return w;break;case"multi":case"multi_search":{if(!Array.isArray(w))break;const y=[];for(const R of w)typeof R!="number"&&typeof R!="string"||v.find(V=>R===V.value)&&y.push(R);return y}}},l=(C,v)=>{const w={};for(const y in C.info){v[y]&&typeof v[y]=="boolean"&&(w[y]=v[y]);const R=C.info[y].config;for(const V in R){const P=R[V],vx=o(P.config_type,P.candidates,v[V]);vx!==void 0&&(w[V]=vx)}}return w},b=async C=>{try{const v=await Promise.all(n.map(R=>ye(e,R.key))),w=JSON.parse(decodeURIComponent(atob(C))),y={};v.forEach((R,V)=>{const P=n[V].key;w[P]!==void 0&&Object.assign(y,l(R,w[P]))}),await ft(e,y),s({status:"success",title:"配置导入成功"}),t?.()}catch(v){v instanceof Bt?s({status:"error",title:"配置导入失败",description:v.response?.data||"网络错误"}):s({status:"error",title:"配置导入失败",description:v.message})}finally{r()}},d=I.useRef(null),u=C=>{const v=C.target.files&&C.target.files.length>0?C.target.files[0]:void 0;v!==void 0&&(c(),v.text().then(b))},h=H(),[_,f]=I.useState(""),g=I.useRef(null),p=()=>{h.onClose(),b(_)},j=()=>{r(),h.onClose(),f("")},k=T("white","gray.700");return x.jsx(x.Fragment,{children:e!="BATCH_RUNNER"&&x.jsxs(q,{spacing:4,w:"full",bg:k,rounded:"xl",boxShadow:"lg",p:6,my:12,children:[x.jsx(Lx,{lineHeight:1.1,fontSize:{base:"2xl",sm:"3xl"},children:"配置导入/导出"}),x.jsx(A,{bg:"blue.400",color:"white",w:"full",isLoading:a,type:"submit",_hover:{bg:"blue.500"},onClick:i,children:"导出"}),x.jsxs(A,{bg:"blue.400",color:"white",w:"full",isLoading:a,type:"submit",_hover:{bg:"blue.500"},onClick:()=>d.current?.click(),children:["从文件导入",x.jsx("input",{ref:d,type:"file",accept:".autopcrcfg",style:{visibility:"hidden",position:"absolute"},onChange:u})]}),x.jsx(A,{bg:"blue.400",color:"white",w:"full",isLoading:a,type:"submit",_hover:{bg:"blue.500"},onClick:h.onOpen,children:"从文本导入"}),x.jsx(Ye,{leastDestructiveRef:g,isOpen:h.isOpen,onClose:j,children:x.jsxs(Je,{children:[x.jsx(ox,{children:"从文本导入"}),x.jsx(ix,{children:x.jsx(Be,{placeholder:"请输入 .autopcrcfg 文件内容。",value:_,onChange:C=>f(C.target.value)})}),x.jsxs(Ue,{children:[x.jsx(A,{onClick:j,children:"取消"}),x.jsx(A,{colorScheme:"blue",onClick:p,ml:3,children:"确定"})]})]})})]})})},Ce=bx("/daily/_sidebar/account/$account")({component:As,loader:({params:{account:e}})=>lt(e),errorComponent:()=>x.jsx("div",{children:" Not Found "})});function As(){const{account:e}=Ce.useParams(),n=Ce.useLoaderData(),[t,s]=I.useState(n),a=async()=>{try{const c=await lt(e);s(c)}catch(c){console.error("刷新账号数据失败",c)}};return I.useEffect(()=>{s(n)},[n]),x.jsxs(He,{isLazy:!0,variant:"enclosed",defaultIndex:t?.username!=""&&t?.password!=""?1:0,display:"flex",flexDirection:"column",height:"100%",children:[x.jsxs(Qe,{mb:"1em",children:[x.jsxs($x,{id:"account",children:[" ",e," "]}),t?.area.map(c=>x.jsxs($x,{id:c?.key,children:[" ",c?.name," "]},c?.key))]}),x.jsxs(Ge,{flex:1,overflow:"auto",children:[x.jsxs(Ex,{id:"account",children:[x.jsx(Is,{accountInfo:t,onSaveSuccess:a}),x.jsx(Rs,{alias:t?.alias,areas:t?.area,onImportSuccess:a})]}),t?.area.map(c=>x.jsxs(Ex,{id:c?.key,children:[" ",x.jsx(ks,{alias:t?.alias,keys:c?.key})," "]},c?.key))]})]})}const U=ex;(function(e,n){const t={_0x4b8e42:169,_0x2506d0:198,_0x5e312a:174,_0x38c901:156,_0x30298a:173,_0x122526:193,_0x22fd92:175},s=ex,a=e();for(;;)try{if(-parseInt(s(161))/1*(-parseInt(s(190))/2)+-parseInt(s(t._0x4b8e42))/3+parseInt(s(t._0x2506d0))/4*(-parseInt(s(t._0x5e312a))/5)+parseInt(s(t._0x38c901))/6*(-parseInt(s(t._0x30298a))/7)+parseInt(s(191))/8*(-parseInt(s(159))/9)+-parseInt(s(t._0x122526))/10+-parseInt(s(t._0x22fd92))/11*(-parseInt(s(155))/12)===n)break;a.push(a.shift())}catch{a.push(a.shift())}})(Qx,-1548328+12521*-50+3012273);const Os=function(){let e=!0;return function(n,t){const s=e?function(){if(t){const a=t.apply(n,arguments);return t=null,a}}:function(){};return e=!1,s}}(),we=Os(void 0,function(){const e={_0x1da1c8:183,_0x56ec65:158},n=ex,t={};t[n(e._0x1da1c8)]=n(185)+"+$";const s=t;return we.toString()[n(194)](n(185)+"+$")[n(e._0x56ec65)]()[n(166)+"r"](we)[n(194)](s[n(183)])});we();const Ox=function(){let e=!0;return function(n,t){const s={_0xf4e65b:186},a=e?function(){const c=ex;if(t){const r=t[c(s._0xf4e65b)](n,arguments);return t=null,r}}:function(){};return e=!1,a}}(),zs=Ox(void 0,function(){const e={_0x1549f8:162,_0x20d3e8:187,_0x5d5660:181,_0x4999d4:199,_0x221f70:180,_0x3b81e9:177,_0x1da9da:184,_0x4922cb:188,_0x27e2fb:192,_0x3cf77a:163,_0x47230c:165,_0x4fef6a:172,_0x4dc4ba:166,_0x541665:176,_0x367981:158},n=ex,t={HOdIQ:function(r,i){return r(i)},BaCqb:function(r,i){return r+i},rExpR:function(r,i){return r+i},BusJa:n(170)+"nction() ",oBzTz:'{}.constructor("retu'+n(179)+" )",CyXaK:n(e._0x1549f8),DIKwt:n(e._0x20d3e8),JeEzk:n(167),afedB:n(e._0x5d5660),CBerj:n(182),fYnEw:function(r,i){return r<i}};let s;try{s=t[n(196)](Function,t.BaCqb(t[n(e._0x4999d4)](t[n(171)],t[n(e._0x221f70)]),");"))()}catch{s=window}const a=s.console=s.console||{},c=[t[n(154)],n(e._0x3b81e9),t[n(e._0x1da9da)],t[n(168)],t[n(e._0x4922cb)],t[n(e._0x27e2fb)],n(e._0x3cf77a)];for(let r=-2381*-1+1828+-4209;t[n(e._0x47230c)](r,c[n(e._0x4fef6a)]);r++){const i=Ox[n(e._0x4dc4ba)+"r"].prototype[n(e._0x541665)](Ox),o=c[r],l=a[o]||i;i.__proto__=Ox.bind(Ox),i[n(158)]=l[n(e._0x367981)].bind(l),a[o]=i}});zs();function Qx(){const e=["Dg9tDhjPBMC","mZGZnJK3rxnWEefN","l2rHAwX5","muX4vu9OqG","Bg9N","DhjHy2u","Cgf0Aa","zLLUrxC","y29UC3rYDwn0BW","zxjYB3i","sMvfEMS","odm0nti4Au1tBKDh","CMv0DxjUicHMDq","qNvZsMe","BgvUz3rO","odrZDLfkEei","mJeYnJe1wuzlAK14","mJjzCMfAsKW","yMLUza","D2fYBG","l2fJy291BNqVja","CM4GDgHPCYiPka","B0j6vhO","zxHJzxb0Aw9U","DgfIBgu","EKHZz3G","reLlD3q","kcGOlISPkYKRkq","yxbWBhK","Aw5MBW","ywzLzei","B3v0zq","mJiXodG3og15Be5tva","mtyWD3vvDxLH","q0jLCMO","mta1oti0nJbpqLnqtK0","C2vHCMnO","ywrKq2HPBgrYzq","se9Ksve","z2v0ugfYzw50uG","ogzpB3jmtG","CKv4Cfi","q3LyyuS","mtuYntiWnZjVBMPdANu","mJy5mJe0ugzSCxPl","DxbKyxrL"];return Qx=function(){return e},Qx()}const Ds=bx(U(160))(),Se={};Se[U(164)]=U(160),Se[U(197)+U(189)]=()=>at;const ce=Ds[U(157)](Se),ve={};ve.path="/validate",ve[U(197)+U(189)]=()=>ce;const Ms=ut.update(ve),ke={};ke[U(164)]="/login",ke[U(197)+U(189)]=()=>ce;const Ls=se[U(157)](ke),Ie={};Ie.id="/_sidebar",Ie[U(197)+"oute"]=()=>ce;const ae=hs.update(Ie),Re={};Re[U(164)]="/user/",Re["getParentR"+U(189)]=()=>ae;const Ts=ht[U(157)](Re),Ae={};function ex(e,n){const t=Qx();return ex=function(s,a){s=s-(-1*-3407+-428+-2825);let c=t[s];if(ex.dMMOgy===void 0){var r=function(b){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let u="",h="",_=u+r;for(let f=0,g,p,j=0;p=b.charAt(j++);~p&&(g=f%4?g*64+p:p,f++%4)?u+=_.charCodeAt(j+10)-10!==0?String.fromCharCode(255&g>>(-2*f&6)):f:0)p=d.indexOf(p);for(let f=0,g=u.length;f<g;f++)h+="%"+("00"+u.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(h)};ex.Irmhjk=r,e=arguments,ex.dMMOgy=!0}const i=t[-6142*1+-29*59+7853],o=s+i,l=e[o];if(l)c=l;else{const b=function(d){this.yDfNMC=d,this.PRcfBH=[1,0,0],this.uEOODq=function(){return"newState"},this.weeQWU="\\w+ *\\(\\) *{\\w+ *",this.QlkYFM=`['|"].+['|"];? *}`};b.prototype.OliTSg=function(){const d=new RegExp(this.weeQWU+this.QlkYFM),u=d.test(this.uEOODq.toString())?--this.PRcfBH[7464*1+-13*19+2*-3608]:--this.PRcfBH[-752+391*23+-8241];return this.oDtUNL(u)},b.prototype.oDtUNL=function(d){return~d?this.aDYbLj(this.yDfNMC):d},b.prototype.aDYbLj=function(d){for(let u=15*-177+1409+1246,h=this.PRcfBH.length;u<h;u++)this.PRcfBH.push(Math.round(Math.random())),h=this.PRcfBH.length;return d(this.PRcfBH[-4135*-1+-1*-8818+-12953])},new b(ex).OliTSg(),c=ex.Irmhjk(c),e[o]=c}return c},ex(e,n)}Ae.path="/account/",Ae[U(197)+"oute"]=()=>ae;const Us=rx[U(157)](Ae),Oe={};Oe[U(164)]=U(178)+"account",Oe.getParentRoute=()=>ae;const Bs=Ce[U(157)](Oe),Fs=at[U(195)+"n"]([ce.addChildren([ae[U(195)+"n"]([Bs,Us,Ts]),Ls,Ms])]),$s=Ft({routeTree:Fs,defaultPreload:"intent",context:{}});function Es(){return x.jsx($t,{router:$s,context:{}})}function qs(){return x.jsx(Es,{})}const Mx=J;(function(e,n){const t={_0x329451:302,_0x456126:277,_0x3ea18a:290,_0x213778:303},s=J,a=e();for(;;)try{if(parseInt(s(t._0x329451))/1+parseInt(s(t._0x456126))/2+parseInt(s(t._0x3ea18a))/3+parseInt(s(t._0x213778))/4+parseInt(s(295))/5*(-parseInt(s(315))/6)+parseInt(s(317))/7*(parseInt(s(309))/8)+-parseInt(s(288))/9*(parseInt(s(313))/10)===n)break;a.push(a.shift())}catch{a.push(a.shift())}})(Gx,180981);const Ns=function(){const e={_0x4cd188:308};let n=!0;return function(t,s){const a=n?function(){const c=J;if(s){const r=s[c(e._0x4cd188)](t,arguments);return s=null,r}}:function(){};return n=!1,a}}(),ze=Ns(void 0,function(){const e={_0x4355ac:300,_0xc46b6a:310,_0x5d3c38:287},n=J,t={};t[n(278)]=n(314)+"+$";const s=t;return ze[n(e._0x4355ac)]()[n(e._0xc46b6a)](s[n(278)])[n(300)]()[n(e._0x5d3c38)+"r"](ze)[n(e._0xc46b6a)](s.Xhfrk)});ze();const zx=function(){const e={_0x2903b7:308};let n=!0;return function(t,s){const a=n?function(){const c=J;if(s){const r=s[c(e._0x2903b7)](t,arguments);return s=null,r}}:function(){};return n=!1,a}}(),Ps=zx(void 0,function(){const e={_0x413ca2:291,_0x54a828:280,_0x41f9c3:296,_0x5572da:306,_0x54e2e1:292,_0x56ae0b:284,_0x1568a7:286,_0x1e057d:318,_0x4c76ac:305,_0x5c3f86:287,_0x4c46f5:279,_0x35a058:316},n={_0x13809a:319,_0x80c32a:298},t=J,s={ierzE:function(o,l){return o(l)},TIOqe:function(o,l){return o+l},ZUoVg:function(o,l){return o+l},mfwIy:t(e._0x413ca2)+t(e._0x54a828),aCcXu:function(o){return o()},wyJQu:t(e._0x41f9c3),mSljW:t(e._0x5572da),UVpdZ:t(e._0x54e2e1),RWDeC:t(312),OEsoW:t(285),CFMrM:function(o,l){return o<l}},a=function(){const o=t;let l;try{l=s[o(n._0x13809a)](Function,s[o(293)](s.ZUoVg(s.mfwIy,"{}.constru"+o(299)+o(n._0x80c32a)+" )"),");"))()}catch{l=window}return l},c=s[t(281)](a),r=c[t(e._0x56ae0b)]=c[t(284)]||{},i=[s[t(e._0x1568a7)],t(304),s.mSljW,t(294),s[t(301)],s[t(e._0x1e057d)],s[t(282)]];for(let o=-12719+161*79;s[t(e._0x4c76ac)](o,i[t(307)]);o++){const l=zx[t(e._0x5c3f86)+"r"][t(e._0x4c46f5)][t(e._0x35a058)](zx),b=i[o],d=r[b]||l;l.__proto__=zx[t(e._0x35a058)](zx),l.toString=d[t(300)].bind(d),r[b]=l}});Ps();const De={};De["initialCol"+Mx(289)]=Mx(311),De[Mx(297)+Mx(276)]=!0;function Gx(){const e=["t0vZB1C","z3jHEs4Xmda","y29UC29Szq","DhjHy2u","D3Lkuxu","y29UC3rYDwn0BW","nZm1ndm1owXTDuvOBa","B3jnB2rL","mta3nte1nufZBuHAyW","CMv0DxjUicHMDq","zxHJzxb0Aw9U","veLpCwu","zxjYB3i","ntKXmfLXreX6rG","Bg9N","DxnLu3LZDgvTqW","CM4GDgHPCYiPka","y3rVCIGICMv0Dq","Dg9tDhjPBMC","vvzWzfO","odK0ow9YBNrOrG","mtm3otm2ngHhAgTJta","D2fYBG","q0znCK0","Aw5MBW","BgvUz3rO","yxbWBhK","mZK1ode2Dvjht2Lg","C2vHCMnO","C3LZDgvT","DgfIBgu","mtbkEgfZvhe","kcGOlISPkYKRkq","mtu5mg9fDMXkwq","yMLUza","ndjvELP2wha","uLDezum","AwvYEKu","B2XVCK1Vzgu","nJa0nJuWu0LYyw9i","wgHMCMS","ChjVDg90ExbL","BMn0Aw9UkcKG","yunJwhu"];return Gx=function(){return e},Gx()}const Ws=De,Vs=dn({config:Ws,styles:{global:e=>({body:{bg:fn(Mx(283),"gray.800")(e)}})}});function J(e,n){const t=Gx();return J=function(s,a){s=s-(-8049*-1+3*1879+-745*18);let c=t[s];if(J.gGctXU===void 0){var r=function(b){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let u="",h="",_=u+r;for(let f=0,g,p,j=0;p=b.charAt(j++);~p&&(g=f%4?g*64+p:p,f++%4)?u+=_.charCodeAt(j+10)-10!==0?String.fromCharCode(255&g>>(-2*f&6)):f:0)p=d.indexOf(p);for(let f=0,g=u.length;f<g;f++)h+="%"+("00"+u.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(h)};J.ausyqL=r,e=arguments,J.gGctXU=!0}const i=t[1942+1942*-1],o=s+i,l=e[o];if(l)c=l;else{const b=function(d){this.EghvJL=d,this.GkTfnt=[1,0,0],this.bLVHvU=function(){return"newState"},this.HiOIjf="\\w+ *\\(\\) *{\\w+ *",this.wrrPND=`['|"].+['|"];? *}`};b.prototype.cSaRNA=function(){const d=new RegExp(this.HiOIjf+this.wrrPND),u=d.test(this.bLVHvU.toString())?--this.GkTfnt[-1*2437+-2735+739*7]:--this.GkTfnt[2*-1028+5611+-79*45];return this.zNiyBo(u)},b.prototype.zNiyBo=function(d){return~d?this.oJFZah(this.EghvJL):d},b.prototype.oJFZah=function(d){for(let u=-19*327+8529*1+-6*386,h=this.GkTfnt.length;u<h;u++)this.GkTfnt.push(Math.round(Math.random())),h=this.GkTfnt.length;return d(this.GkTfnt[1371+1371*-1])},new b(J).cSaRNA(),c=J.ausyqL(c),e[o]=c}return c},J(e,n)}Et.createRoot(document.getElementById("root")).render(x.jsx(un,{toastOptions:{defaultOptions:{position:"top-right",duration:2500,isClosable:!0}},theme:Vs,children:x.jsx(B.Provider,{children:x.jsx(qs,{})})}));
